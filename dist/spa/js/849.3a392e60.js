"use strict";(self["webpackChunksmi_frontend"]=self["webpackChunksmi_frontend"]||[]).push([[849],{925:(e,t,s)=>{s.d(t,{e7:()=>n,KS:()=>a,WU:()=>o,Fv:()=>r});const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a=(e,t)=>{const s=new Date(e,t,0).getDate(),n=new Date(e,t-1,1),a=[];for(let o=6-n.getDay(),r=1;o<s;o+=7,r++)a.push({day:o+1,label:`Sábado ${o+1}`,week:r,total:0});return a},o=e=>{if(!e)return null;const t=new Date(e);return[t.getUTCDate(),t.getUTCMonth()+1,t.getUTCFullYear()].join("/")},r=e=>e?[e.split("/")[2],e.split("/")[1],e.split("/")[0]].join("-"):null},1849:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var n=s(3673),a=s(2323),o=s(1959),r=s(9582),l=s(925),i=s(2993),c=s(4626),u=s(185),d=function(e,t,s,n){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,o){function r(e){try{i(n.next(e))}catch(t){o(t)}}function l(e){try{i(n["throw"](e))}catch(t){o(t)}}function i(e){e.done?s(e.value):a(e.value).then(r,l)}i((n=n.apply(e,t||[])).next())}))};const p={key:0,class:"container"},m={class:"treasury-title"},v={key:0,class:"text-warning"},b={class:"row"},y={class:"col-xs-6 col-sm-3 q-pr-sm card-button"},g=(0,n._)("strong",{class:"q-pb-sm"},"Ingresos",-1),f={class:"btn-block-detail"},h=(0,n._)("strong",null,"Total:",-1),k=(0,n.Uk)(),w={class:"text-primary"},_={class:"col-xs-6 col-sm-3 q-pl-sm card-button"},C=(0,n._)("strong",{class:"q-pb-sm"},"Gastos",-1),$={class:"btn-block-detail"},x=(0,n._)("strong",null,"Total:",-1),D=(0,n.Uk)(),q={class:"text-primary"},I={key:0,class:"col-xs-6 col-sm-3 q-pl-sm card-button"},S=(0,n._)("strong",{class:"q-pb-sm"},"Informe mensual",-1),U=(0,n._)("span",{class:"btn-block-detail"},[(0,n._)("strong",null,"Ingresos y gastos")],-1),W={class:"text-right q-pt-sm q-gutter-xs"},E=(0,n.aZ)({setup(e){const t=(0,o.iH)(),s=(0,o.iH)(0),E=(0,o.iH)(0),F=(0,r.yj)(),O=(0,r.tv)(),{entryId:T,expenseId:A}=F.params,L=()=>d(this,void 0,void 0,(function*(){t.value=yield i.http.get(`entries/${parseInt(T)}`)})),N=()=>d(this,void 0,void 0,(function*(){const e=yield i.http.get(`entriesdetails?id_entry=${t.value.id}`);s.value=e.rows.reduce(((e,t)=>e+Number(t.value)),0).toFixed(1)})),j=()=>d(this,void 0,void 0,(function*(){const e=yield i.http.get(`expensesdetails?id_expense=${A}`);E.value=e.rows.reduce(((e,t)=>e+Number(t.value)),0).toFixed(1)})),z=()=>{0===Number.parseFloat(s.value)||0===Number.parseFloat(E.value)?c.message.warning("Debe llenar los ingresos y los gastos"):"ACTIVE"===t.value.state&&(0,u.Confirm)(`Va a <strong>cerrar</strong> el mes de <strong>${l.e7[t.value.month-1]}</strong> este proceso es irreversible, revise los datos antes de continuar porque ya no podrá modificarlos.`,(()=>d(this,void 0,void 0,(function*(){return yield i.http.put(`entries/close/${T}/${A}`),O.push(`/treasury/report/${T}/${A}`)}))),null,"Advertencia","Cerrar mes")};return(0,n.wF)((()=>d(this,void 0,void 0,(function*(){yield L(),yield N(),yield j()})))),(e,r)=>{const i=(0,n.up)("q-btn"),c=(0,n.up)("q-icon");return t.value?((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("h2",m,[(0,n.Wm)(i,{icon:"arrow_back",round:"",flat:"",onClick:r[0]||(r[0]=t=>e.$router.push("/treasury"))}),(0,n.Uk)(" Ingresos y Gastos de "+(0,a.zw)((0,o.SU)(l.e7)[t.value.month-1])+" ",1),"CLOSED"===t.value.state?((0,n.wg)(),(0,n.iD)("span",v,"CERRADO")):(0,n.kq)("",!0)]),(0,n._)("div",b,[(0,n._)("div",y,[(0,n.Wm)(i,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:r[1]||(r[1]=t=>e.$router.push(`/treasury/week/${e.$route.params.entryId}`)),class:"full-width btn-block"},{default:(0,n.w5)((()=>[g,(0,n._)("span",f,[h,k,(0,n._)("span",w,(0,a.zw)(s.value)+" Bs.",1)]),(0,n.Wm)(c,{name:"attach_money"})])),_:1})]),(0,n._)("div",_,[(0,n.Wm)(i,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:r[2]||(r[2]=t=>e.$router.push(`/treasury/expense/${e.$route.params.expenseId}`)),class:"full-width btn-block"},{default:(0,n.w5)((()=>[C,(0,n._)("span",$,[x,D,(0,n._)("span",q,(0,a.zw)(E.value)+" Bs.",1)]),(0,n.Wm)(c,{name:"money_off"})])),_:1})]),"CLOSED"===t.value.state?((0,n.wg)(),(0,n.iD)("div",I,[(0,n.Wm)(i,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:r[3]||(r[3]=t=>e.$router.push(`/treasury/report/${(0,o.SU)(T)}/${(0,o.SU)(A)}`)),class:"full-width btn-block"},{default:(0,n.w5)((()=>[S,U,(0,n.Wm)(c,{name:"analytics"})])),_:1})])):(0,n.kq)("",!0)]),(0,n._)("div",W,[(0,n.Wm)(i,{label:"Cambiar mes","no-caps":"",icon:"calendar_month",onClick:r[4]||(r[4]=t=>e.$router.push("/treasury/months"))}),"CLOSED"!==t.value.state?((0,n.wg)(),(0,n.j4)(i,{key:0,label:"CLOSED"===t.value.state?"Ver informe mensual":"Cerrar el mes","no-caps":"",color:"primary",icon:"CLOSED"===t.value.state?"print":"check",class:"btn-close-month",onClick:z},null,8,["label","icon"])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)}}});var F=s(8240),O=s(4554),T=s(7518),A=s.n(T);const L=E,N=L;A()(E,"components",{QBtn:F.Z,QIcon:O.Z})}}]);