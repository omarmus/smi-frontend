"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[599],{599:(n,e,o)=>{o.r(e),o.d(e,{default:()=>k});var t=o(3673),l=o(1959),s=o(8339),a=o(4781),i=o(2993),c=o(9236),r=function(n,e,o,t){function l(n){return n instanceof o?n:new o((function(e){e(n)}))}return new(o||(o=Promise))((function(o,s){function a(n){try{c(t.next(n))}catch(e){s(e)}}function i(n){try{c(t["throw"](n))}catch(e){s(e)}}function c(n){n.done?o(n.value):l(n.value).then(a,i)}c((t=t.apply(n,e||[])).next())}))};const u={class:"container"},d={class:"treasury-title"},v={class:"row q-col-gutter-md"},p={key:0,class:"col-xs-12 col-sm-6 col-md-3 card-button"},b={key:1,class:"col-xs-12 col-sm-6 col-md-3 card-button"},y={key:2,class:"col-xs-12 col-sm-6 col-md-3 card-button"},f=(0,t.aZ)({__name:"Treasury",setup(n){var e,o;const f=(0,c.o)(),h=null===(o=null===(e=f.state.user)||void 0===e?void 0:e.user)||void 0===o?void 0:o.company.id,m=(0,s.tv)(),w=(0,l.iH)(),g=(0,l.iH)(),k=()=>{const n=w.value.rows.find((n=>"ACTIVE"===n.state)),e=g.value.rows.find((n=>"ACTIVE"===n.state));return n&&e?m.push(`/treasury/entryexpense/${n.id}/${e.id}`):m.push("/treasury/months")},$=(new Date).getUTCFullYear();return(0,t.wF)((()=>r(this,void 0,void 0,(function*(){const n=a.storage.get("initial");if(n)return m.push("/treasury/flows/initial");g.value=yield i.http.get(`expenses/year/${$}/${h}`),w.value=yield i.http.get(`entries/year/${$}/${h}`)})))),(n,e)=>{var o,l,s,a,i,c,r,f;const h=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("h2",d,[(0,t.Wm)(h,{icon:"arrow_back",round:"",flat:"",onClick:e[0]||(e[0]=e=>n.$router.push("/"))}),(0,t.Uk)(" TesorerÃ­a ")]),(0,t._)("div",v,[(null===(l=null===(o=n.$store.state.user)||void 0===o?void 0:o.permissions)||void 0===l?void 0:l.includes("entry:read"))?((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"attach_money",label:"Ingresos y Gastos","no-caps":"",onClick:k,class:"full-width btn-block",disable:0===(null===(s=w.value)||void 0===s?void 0:s.count)},null,8,["disable"])])):(0,t.kq)("",!0),(null===(i=null===(a=n.$store.state.user)||void 0===a?void 0:a.permissions)||void 0===i?void 0:i.includes("balance:read"))?((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"account_balance",label:"Flujo de caja","no-caps":"",onClick:e[1]||(e[1]=e=>n.$router.push("/treasury/flows/general")),class:"full-width btn-block",disable:0===(null===(c=w.value)||void 0===c?void 0:c.count)},null,8,["disable"])])):(0,t.kq)("",!0),(null===(f=null===(r=n.$store.state.user)||void 0===r?void 0:r.permissions)||void 0===f?void 0:f.includes("account:read"))?((0,t.wg)(),(0,t.iD)("div",y,[(0,t.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"account_balance_wallet",label:"Cuentas bancarias","no-caps":"",onClick:e[2]||(e[2]=e=>n.$router.push("/treasury/accounts")),class:"full-width btn-block"})])):(0,t.kq)("",!0)])])}}});var h=o(2165),m=o(7518),w=o.n(m);const g=f,k=g;w()(f,"components",{QBtn:h.Z})}}]);