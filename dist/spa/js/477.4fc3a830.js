"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[477],{7281:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ul});var t=a(3673),n=a(2323),o=a(1959),i=a(8880),u=a(9405),s=a(8339),r=a(2993),c=a(185),d=a(4626),v=a(925),p=a(9236),m=a(8468),w=a(5751),y=a(5198);const g={class:"text-primary"},f=(0,t._)("br",null,null,-1),b=(0,t._)("br",null,null,-1),_={class:"treasury-observation"},k=(0,t.aZ)({__name:"UserSearch",props:{value:null},emits:["name"],setup(e,{emit:l}){const a=e,i="users?all_association=true",u=[{label:"Nombre completo:",align:"left",name:"person.fullname",sortable:!0},{label:"",align:"right"}],s=(0,o.iH)([{label:"Buscar por nombre completo",name:"fullname",type:"input",value:a.value}]),r=(0,o.iH)(!1),c=e=>{l("update:name",{value:e.id,label:e.person.fullname})};return(0,t.bv)((()=>{(0,t.Y3)((()=>{r.value=!0}))})),(e,l)=>{const a=(0,t.up)("q-icon"),o=(0,t.up)("q-toolbar-title"),d=(0,t.up)("q-btn"),v=(0,t.up)("q-toolbar"),p=(0,t.up)("q-td"),m=(0,t.up)("q-tr"),w=(0,t.up)("q-card-section"),k=(0,t.up)("q-card"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(k,{class:"card-roles"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{name:"person_search",size:"md"}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Buscar personas ")])),_:1}),(0,t.wy)((0,t.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[h]])])),_:1}),(0,t.Wm)(w,{class:"search-user"},{default:(0,t.w5)((()=>[r.value?((0,t.wg)(),(0,t.j4)(y.Z,{key:0,columns:u,filters:s.value,"open-filter":!0,url:i,buttonsHidden:"","cols-filter":"col-xs-12 col-sm-12 col-md-12","label-selection":"person.fullname"},{row:(0,t.w5)((e=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>{var l,a,o,i;return[(0,t._)("strong",g,(0,n.zw)(null===(l=e.row.person)||void 0===l?void 0:l.fullname),1),f,(0,t._)("em",null,(0,n.zw)(null===(a=e.row.company)||void 0===a?void 0:a.name),1),b,(0,t._)("strong",_,(0,n.zw)(null===(o=e.row.association)||void 0===o?void 0:o.name)+" - "+(0,n.zw)(null===(i=e.row.association)||void 0===i?void 0:i.country),1)]})),_:2},1024),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(d,{dense:"",size:"md",padding:"3px 10px","no-caps":"",color:"primary",type:"button",onClick:l=>c(e.row),label:"Seleccionar"},null,8,["onClick"]),[[h]])])),_:2},1024)])),_:2},1024)])),_:1},8,["filters"])):(0,t.kq)("",!0)])),_:1})])),_:1})}}});var h=a(151),q=a(9570),C=a(4554),E=a(3747),D=a(2165),x=a(5589),z=a(8186),W=a(3884),S=a(9367),U=a(6429),H=a(677),M=a(7518),L=a.n(M);const Z=k,O=Z;L()(k,"components",{QCard:h.Z,QToolbar:q.Z,QIcon:C.Z,QToolbarTitle:E.Z,QBtn:D.Z,QCardSection:x.Z,QTr:z.Z,QTd:W.Z,QCardActions:S.Z,QTable:U.Z}),L()(k,"directives",{ClosePopup:H.Z});var V=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{s(t.next(e))}catch(l){o(l)}}function u(e){try{s(t["throw"](e))}catch(l){o(l)}}function s(e){e.done?a(e.value):n(e.value).then(i,u)}s((t=t.apply(e,l||[])).next())}))};const B={key:0,class:"container"},$={class:"treasury-title"},A={class:"row"},Q={key:0,class:"col-xs-12 col-sm-5"},R={class:"col-xs-12"},I={key:0,class:"col-xs-12",id:"entry-person"},T={class:"popover-users"},F=["placeholder"],Y={class:"text-secondary"},j=(0,t._)("div",{class:"alert alert-info"}," La persona que busca no está registrada ",-1),N={class:"col-xs-12"},K={class:"row"},G={class:"col-xs-6 q-pr-xs",id:"entry-value"},P={class:"col-xs-6"},J={class:"col-xs-12"},X={key:1,class:"col-xs-12"},ee={key:2},le=(0,t._)("h3",{class:"text-warning treasury-subtitle"},"Concepto de donación",-1),ae={class:"q-table-simple q-table__container q-table--horizontal-separator column q-table--dense"},te={class:"q-table"},ne=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{class:"text-left"}),(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Concepto")]),(0,t._)("th",{class:"text-right"},[(0,t._)("strong",null,"Valor")])])],-1),oe={class:"width-80"},ie={class:"text-left"},ue={class:"treasury-observation"},se={key:0},re={class:"text-right"},ce=(0,t._)("th",{class:"text-left",colspan:"2"},[(0,t._)("strong",null,"Total")],-1),de={class:"text-right"},ve={class:"col-xs-12"},pe={key:0,class:"text-secondary treasury-subtitle"},me={key:1,class:"q-table-simple q-table__container q-table--horizontal-separator column q-table--dense q-table--no-wrap"},we={key:0,class:"text-left"},ye=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Nro. Boleta")],-1),ge=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Nombre")],-1),fe={key:1,class:"text-left"},be=(0,t._)("strong",null,"Detalle",-1),_e=[be],ke=(0,t._)("th",{class:"text-right"},[(0,t._)("strong",null,"Valor")],-1),he={key:0,class:"width-120"},qe={class:"width-120"},Ce={class:"text-left"},Ee={key:0},De={key:1,class:"text-primary"},xe={key:2,class:"treasury-observation"},ze={key:0},We={key:1},Se={class:"q-ml-sm q-mt-xs"},Ue={key:0,class:"treasury-list-concepts"},He={class:"text-warning"},Me={key:0},Le={key:1,class:"text-left"},Ze={key:0,class:"treasury-observation"},Oe={class:"text-texto"},Ve={key:1},Be={key:2,class:"treasury-list-concepts"},$e={class:"treasury-observation"},Ae={key:0},Qe={class:"text-right total"},Re=(0,t._)("th",{class:"text-left",colspan:"2"},null,-1),Ie=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"TOTAL")],-1),Te={class:"text-right"},Fe={key:2,class:"treasury-empty"},Ye={class:"text-right q-pt-xs q-gutter-xs"},je=(0,t.aZ)({__name:"Entry",setup(e){var l,a;const y=(0,p.o)(),g={member:"Miembro",sympathizer:"Miembro Esc. sabática",visit:"Visita"},f=(0,o.iH)(null),b=(0,o.iH)("MEMBER"),_=(0,o.iH)({value:"",label:""}),k=(0,o.iH)(),h=(0,o.iH)(),q=(0,o.iH)(),C=(0,o.iH)([]),E=(0,o.iH)(),D=(0,o.iH)(!1),x=(0,o.iH)(!1),z=(0,o.iH)(!1),W=(0,o.iH)([]),S=(0,o.iH)([]),U=(0,o.iH)([]),H=(0,o.iH)([]),M=(0,o.iH)([]),L=(0,o.iH)(-1),Z=(0,o.iH)([]),be=(0,o.iH)(),je=(0,o.iH)(),Ne=(0,o.iH)(!0),Ke=(0,o.iH)(null),Ge=(0,o.iH)(!1),Pe=(0,o.iH)(""),Je=(0,o.iH)(),Xe=(0,s.yj)(),{entryId:el,week:ll}=Xe.params,al=null===(a=null===(l=y.state.user)||void 0===l?void 0:l.user)||void 0===a?void 0:a.company.id,tl=()=>V(this,void 0,void 0,(function*(){be.value=yield r.http.get(`entries/${parseInt(el)}`);const e=(0,v.KS)(be.value.year,be.value.month),l=e.find((e=>e.week===parseInt(ll)));je.value=l.day;for(let a=0;a<7;a++){const e=new Date(`${be.value.year}-${be.value.month}-${je.value} 00:00:00`),l=new Date(e.setDate(e.getDate()-a));C.value.push({value:(0,v.Fv)((0,v.WU)(l.toString())),label:`${v.an[l.getDay()]} ${l.getDate()}`})}q.value=C.value[0]})),nl=()=>V(this,void 0,void 0,(function*(){const e=yield r.http.get(`entriesdetails?id_entry=${be.value.id}&week=${ll}&order=-entry_detail.id`);Z.value=e.rows})),ol=()=>V(this,void 0,void 0,(function*(){const e=yield r.http.get("departments?order=id");return e.rows.map((e=>({value:e.id,type:e.type,label:e.name,group:e.group})))})),il=(e,l)=>V(this,void 0,void 0,(function*(){let a="users?order=fullname";a+=e?l?`&fullname=${e}&all_association=true`:`&fullname=${e}&all_churchs=true`:`&id_company=${al}`;const t=yield r.http.get(a,!1);return t.rows.map((e=>{var a,t;return{value:e.id,label:`${e.person.fullname}`,church:`${e.company.name}`,association:l?null===(a=e.association)||void 0===a?void 0:a.name:null,type:null===(t=e.type)||void 0===t?void 0:t.toLowerCase()}}))})),ul=["TITHES","SCOOP","SECOND","TITHE"],sl=(e,l)=>{l((()=>{if(""===e)H.value="MEMBER"===b.value?U.value:U.value.filter((e=>!ul.includes(e.group)));else{const l=e.toLowerCase();H.value=U.value.filter((e=>e.label.toLowerCase().indexOf(l)>-1))}}))},rl=()=>V(this,void 0,void 0,(function*(){if("MEMBER"!==b.value){const e=yield Ke.value.validate();if(!e)return!1}if(z.value)return!1;z.value=!0;const e={id:f.value,concepts:M.value,type:b.value,id_entry:be.value.id,date:q.value.value,week:ll};if("MEMBER"===b.value){if(e.value=yl.value,e.id_user=_.value.value,!e.id_user)return d.message.warning("No seleccionó correctamente el usuario"),!1}else if(e.observations=E.value,e.value=h.value,e.id_department=k.value.value,!e.id_department)return d.message.warning("No seleccionó correctamente el departamento"),!1;const l=U.value.find((e=>"YOUNG"===e.group&&"LOCAL"===e.type)).value,a=U.value.find((e=>"YOUNG"===e.group&&"GLOBAL"===e.type)).value;"MEMBER"!==b.value&&!f.value&&[l,a].includes(e.id_department)?((0,c.Confirm)("¿Desea dividir la ofrenda de jóvenes para la Asociación e Iglesia local?",(()=>V(this,void 0,void 0,(function*(){e.value=Number(e.value)/2,e.id_department=l,e.split=!0,yield r.http.post("entriesdetails",e),e.id_department=a,yield r.http.post("entriesdetails",e),yield nl(),z.value=!1}))),(()=>V(this,void 0,void 0,(function*(){e.split=!1,yield r.http.post("entriesdetails",e),yield nl(),z.value=!1}))),"Ofrenda de Jóvenes","Si","No"),yield cl()):(f.value?yield r.http.put(`entriesdetails/${f.value}`,e):yield r.http.post("entriesdetails",e),z.value=!1,yield nl(),yield cl())})),cl=()=>V(this,void 0,void 0,(function*(){Ke.value.resetValidation(),Ne.value=!1,W.value=S.value,yield(0,t.Y3)((()=>{f.value=null,k.value=null,E.value="",h.value="",L.value=-1,M.value=[],_.value={value:"",label:""},Ne.value=!0,q.value=C.value[0]}))})),dl=e=>V(this,void 0,void 0,(function*(){const l=yield r.http.get(`entriesdetails/${e}`);b.value=l.type,f.value=l.id,"MEMBER"===b.value?(_.value={value:l.user.id,label:l.user.person.fullname},l.id_user=_.value.value,M.value=l.concepts):(E.value=l.observation,h.value=l.value,q.value=C.value.find((e=>e.value===(0,v.Fv)((0,v.WU)(l.date)))),k.value={value:l.department.id,label:l.department.name,type:l.department.type},l.id_department=k.value.value)})),vl=e=>{(0,c.Confirm)("¿Desea eliminar el registro?",(()=>V(this,void 0,void 0,(function*(){yield r.http["delete"](`entriesdetails/${e}`),yield nl()}))),null,"Eliminar","Si","No")},pl=()=>{const e={concept:k.value,observation:E.value,value:h.value};L.value>-1?M.value[L.value]=e:M.value.push(e),k.value=null,E.value="",h.value="",L.value=-1},ml=e=>{const l=M.value[e];k.value=l.concept,E.value=l.observation,h.value=l.value,q.value=C.value[0],L.value=e},wl=e=>{M.value.splice(e,1)},yl=(0,t.Fl)((()=>{let e=0;for(const l of M.value)e+=parseFloat(l.value);return e})),gl=(0,t.Fl)((()=>{let e=0;for(const l of Z.value)e+=parseFloat(l.value);return e})),fl=e=>V(this,void 0,void 0,(function*(){(null===e||void 0===e?void 0:e.code)&&(yield r.http.put(`entriesdetails/${e.id}`,{code:e.code}))})),bl=e=>V(this,void 0,void 0,(function*(){const l=e?`entries/pdf/detail/${e}`:`entries/pdf/details/${be.value.id}/${ll}`,a=yield r.http.get(l);(0,w.$z)(a,`invoice-${Date.now()}.pdf`)}));(0,t.YP)(k,(e=>{e&&(0,t.Y3)((()=>{document.querySelector("#entry-value input").focus()}))}));const _l=(0,u.Z)((()=>V(this,void 0,void 0,(function*(){var e;""===(null===(e=_.value)||void 0===e?void 0:e.label)?(W.value=S.value,D.value=!0):(x.value=!0,W.value=yield il(_.value.label),(0,t.Y3)((()=>{x.value=!1,D.value=!0})))}))),400),kl=e=>{_.value=e,D.value=!1},hl=()=>{_.value={label:"",value:""},W.value=S.value,D.value=!1},ql=(e,l)=>V(this,void 0,void 0,(function*(){if("SEARCH"!==l){if(e.length>3&&l){const a=yield r.http.post("users/new",{type:l,fullname:e,id_company:al});_.value={value:a.id,label:a.person.fullname},D.value=!1}}else Ge.value=!1,(0,t.Y3)((()=>{Pe.value=e,Ge.value=!0,D.value=!1}))})),Cl=e=>{Je.value&&!Je.value.contains(e.target)&&(D.value=!1)};return(0,t.bv)((()=>{document.addEventListener("mousedown",Cl)})),(0,t.Ah)((()=>{document.removeEventListener("mousedown",Cl)})),(0,t.wF)((()=>V(this,void 0,void 0,(function*(){U.value=yield ol(),H.value=U.value,S.value=yield il(),W.value=S.value,yield tl(),yield nl()})))),(e,l)=>{const a=(0,t.up)("q-btn"),u=(0,t.up)("q-btn-group"),s=(0,t.up)("q-icon"),r=(0,t.up)("q-field"),c=(0,t.up)("q-item-label"),d=(0,t.up)("q-item-section"),p=(0,t.up)("q-item"),w=(0,t.up)("q-list"),y=(0,t.up)("q-select"),S=(0,t.up)("q-input"),U=(0,t.up)("q-form"),L=(0,t.up)("q-dialog"),V=(0,t.Q2)("ripple");return be.value?((0,t.wg)(),(0,t.iD)("div",B,[(0,t._)("h2",$,[(0,t.Wm)(a,{icon:"arrow_back",round:"",flat:"",onClick:l[0]||(l[0]=l=>e.$router.push(`/treasury/week/${be.value.id}/${e.$route.params.expenseId}`))}),(0,t.Uk)(" Diezmos y ofrendas - Sábado "+(0,n.zw)(je.value)+" de "+(0,n.zw)((0,o.SU)(v.e7)[be.value.month-1]),1)]),(0,t._)("div",A,["CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("div",Q,[Ne.value?((0,t.wg)(),(0,t.j4)(U,{key:0,class:"q-gutter-md",onSubmit:pl,onReset:cl,ref_key:"myForm",ref:Ke},{default:(0,t.w5)((()=>[(0,t._)("div",R,[(0,t.Wm)(u,{spread:"",outline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{outline:"MEMBER"!==b.value,padding:"12px",color:"primary",label:"Persona",onClick:l[1]||(l[1]=e=>b.value="MEMBER"),"no-caps":""},null,8,["outline"]),(0,t.Wm)(a,{outline:"CHURCH"!==b.value,padding:"10px",color:"primary",label:"Congregación",onClick:l[2]||(l[2]=e=>b.value="CHURCH"),"no-caps":""},null,8,["outline"])])),_:1})]),"MEMBER"===b.value?((0,t.wg)(),(0,t.iD)("div",I,[(0,t._)("div",T,[(0,t.Wm)(r,{filled:"",modelValue:_.value.label,"onUpdate:modelValue":l[6]||(l[6]=e=>_.value.label=e),"lazy-rules":"",loading:x.value,rules:[e=>!!e||"Seleccione a una persona"],onClick:l[7]||(l[7]=(0,i.iM)((e=>D.value=!D.value),["stop","prevent"]))},{control:(0,t.w5)((()=>{var e;return[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>_.value.label=e),class:"self-center full-width no-outline no-border bg-transparent",type:"text",onInput:l[4]||(l[4]=(...e)=>(0,o.SU)(_l)&&(0,o.SU)(_l)(...e)),placeholder:(null===(e=_.value)||void 0===e?void 0:e.label)?"":"Escriba un nombre",onClick:l[5]||(l[5]=e=>D.value=!D.value)},null,40,F),[[i.nr,_.value.label]])]})),append:(0,t.w5)((()=>{var e;return[(null===(e=_.value)||void 0===e?void 0:e.label)?((0,t.wg)(),(0,t.j4)(s,{key:0,name:"cancel",class:"cursor-pointer",onClick:hl})):(0,t.kq)("",!0),(0,t.Wm)(s,{name:"arrow_drop_down",class:"cursor-pointer"})]})),_:1},8,["modelValue","loading","rules"]),(0,t.wy)((0,t._)("div",{ref_key:"elementUser",ref:Je,class:"q-menu q-position-engine scroll q-menu--square"},[W.value.length>0?((0,t.wg)(),(0,t.j4)(w,{key:0},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.value,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(p,{clickable:"",key:e.value,onClick:l=>kl(e)},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[(0,t._)("strong",Y,(0,n.zw)(e.association?e.association:g[e.type])+" - ",1),(0,t.Uk)(" "+(0,n.zw)(e.church),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[V]]))),128))])),_:1})):((0,t.wg)(),(0,t.j4)(w,{key:1},{default:(0,t.w5)((()=>[j,(0,t.Wm)(p,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"secondary",label:"Agregar como miembro de Escuela sabática","no-caps":"",onClick:l[8]||(l[8]=e=>ql(_.value.label,"SYMPATHIZER"))})])),_:1})])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"secondary",label:"Agregar como visita",onClick:l[9]||(l[9]=e=>ql(_.value.label,"VISIT"))})])),_:1})])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"warning",label:"Buscar en otra Asociación",onClick:l[10]||(l[10]=e=>ql(_.value.label,"SEARCH"))})])),_:1})])),_:1})])),_:1}))],512),[[i.F8,D.value]])])])):(0,t.kq)("",!0),(0,t._)("div",N,[(0,t.Wm)(y,{filled:"",label:"Concepto",modelValue:k.value,"onUpdate:modelValue":l[11]||(l[11]=e=>k.value=e),"use-input":"","use-chips":"","input-debounce":"0",options:H.value,onFilter:sl,"lazy-rules":"",rules:[e=>!!e||"Seleccione el concepto"]},{option:(0,t.w5)((e=>[(0,t.Wm)(p,(0,n.vs)((0,t.F4)(e.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)("GLOBAL"===e.opt.type?"Asociación":"Iglesia local"),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","rules"])]),(0,t._)("div",K,[(0,t._)("div",G,[(0,t.Wm)(S,{filled:"",label:"Valor",modelValue:h.value,"onUpdate:modelValue":l[12]||(l[12]=e=>h.value=e),"lazy-rules":"",rules:[(0,o.SU)(m.Z).decimal,(0,o.SU)(m.Z).required]},null,8,["modelValue","rules"])]),(0,t._)("div",P,[(0,t.Wm)(y,{filled:"",label:"Fecha",modelValue:q.value,"onUpdate:modelValue":l[13]||(l[13]=e=>q.value=e),options:C.value,rules:[e=>!!e||"Seleccione el concepto"]},null,8,["modelValue","options","rules"])])]),(0,t._)("div",J,[(0,t.Wm)(S,{filled:"",label:"Observaciones",modelValue:E.value,"onUpdate:modelValue":l[14]||(l[14]=e=>E.value=e)},null,8,["modelValue"])]),"MEMBER"===b.value?((0,t.wg)(),(0,t.iD)("div",X,[(0,t.Wm)(a,{padding:"10px",label:"Agregar concepto",icon:"add",color:"warning",type:"submit","no-caps":"",class:"full-width"})])):(0,t.kq)("",!0),"MEMBER"===b.value&&M.value.length?((0,t.wg)(),(0,t.iD)("div",ee,[le,(0,t._)("div",ae,[(0,t._)("table",te,[ne,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(M.value,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:e},[(0,t._)("td",oe,[(0,t.Wm)(a,{size:"sm",icon:"edit",onClick:e=>ml(l),round:"",flat:""},null,8,["onClick"]),(0,t.Wm)(a,{size:"sm",icon:"delete",onClick:e=>wl(l),round:"",flat:""},null,8,["onClick"])]),(0,t._)("td",ie,[(0,t.Uk)((0,n.zw)(e.concept.label)+" ",1),(0,t._)("div",ue,[(0,t.Uk)((0,n.zw)("GLOBAL"===e.concept.type?"Asociación":"Iglesia local")+" ",1),e.observation?((0,t.wg)(),(0,t.iD)("span",se," / "+(0,n.zw)(e.observation),1)):(0,t.kq)("",!0)])]),(0,t._)("td",re,(0,n.zw)(e.value),1)])))),128))]),(0,t._)("tfoot",null,[(0,t._)("tr",null,[ce,(0,t._)("th",de,[(0,t._)("strong",null,(0,n.zw)((0,o.SU)(yl)),1)])])])])])])):(0,t.kq)("",!0),(0,t._)("div",ve,[(0,t.Wm)(a,{padding:"10px",label:f.value?"Actualizar recibo":"Guardar recibo",color:"primary","no-caps":"",disable:0===M.value.length&&"MEMBER"===b.value||z.value,onClick:rl,icon:"check",loading:z.value,class:"full-width"},null,8,["label","disable","loading"]),f.value?((0,t.wg)(),(0,t.j4)(a,{key:0,type:"reset",padding:"10px",label:"Cancelar actualización","no-caps":"",icon:"cancel",class:"full-width q-mt-sm"})):(0,t.kq)("",!0)])])),_:1},512)):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,n.C_)(["col-xs-12 tithe-column",{"col-sm-7":"CLOSED"!==be.value.state,"col-sm-12":"CLOSED"===be.value.state}])},["CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("h3",pe,"Diezmos y ofrendas")):(0,t.kq)("",!0),Z.value.length?((0,t.wg)(),(0,t.iD)("div",me,[(0,t._)("table",{class:(0,n.C_)(["q-table",{"treasury-table-data":"CLOSED"===be.value.state}])},[(0,t._)("thead",null,[(0,t._)("tr",null,["CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("th",we)):(0,t.kq)("",!0),ye,ge,"CLOSED"===be.value.state?((0,t.wg)(),(0,t.iD)("th",fe,_e)):(0,t.kq)("",!0),ke])]),(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Z.value,(e=>{var l,i,u,r;return(0,t.wg)(),(0,t.iD)("tr",{key:e.id},["CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("td",he,[(0,t.Wm)(a,{size:"sm",icon:"edit",round:"",flat:"",onClick:l=>dl(e.id)},null,8,["onClick"]),(0,t.Wm)(a,{size:"sm",icon:"delete",round:"",flat:"",onClick:l=>vl(e.id)},null,8,["onClick"]),"MEMBER"===e.type?((0,t.wg)(),(0,t.j4)(a,{key:0,size:"sm",icon:"print",round:"",flat:"",onClick:l=>bl(e.id)},null,8,["onClick"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("td",qe,["MEMBER"===e.type?((0,t.wg)(),(0,t.j4)(S,{key:0,modelValue:e.code,"onUpdate:modelValue":l=>e.code=l,dense:"",standout:"",debounce:"500",disable:"CLOSED"===be.value.state,onKeyup:l=>fl(e)},null,8,["modelValue","onUpdate:modelValue","disable","onKeyup"])):(0,t.kq)("",!0)]),(0,t._)("td",Ce,["MEMBER"===e.type?((0,t.wg)(),(0,t.iD)("span",Ee,(0,n.zw)(null===(i=null===(l=e.user)||void 0===l?void 0:l.person)||void 0===i?void 0:i.fullname),1)):((0,t.wg)(),(0,t.iD)("strong",De,(0,n.zw)(e.department.name),1)),"CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("span",xe,["MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("strong",ze,(0,n.zw)("LOCAL"===e.department.type?"Iglesia local":"Asociación"),1)):(0,t.kq)("",!0),"MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("span",We,[(0,t.Uk)(" - "),(0,t.Wm)(s,{name:"today"}),(0,t.Uk)(" "+(0,n.zw)((0,o.SU)(v.WU)(e.date)),1)])):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,n.zw)(e.observations?` / ${e.observations}`:""),1)])):(0,t.kq)("",!0),(0,t._)("div",Se,[(null===(u=e.concepts)||void 0===u?void 0:u.length)&&"CLOSED"!==be.value.state?((0,t.wg)(),(0,t.iD)("ul",Ue,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.concepts,((e,l)=>((0,t.wg)(),(0,t.iD)("li",{key:l},[(0,t._)("strong",He,"- "+(0,n.zw)(e.concept.label)+": ",1),(0,t.Uk)((0,n.zw)(e.value)+" / "+(0,n.zw)("LOCAL"===e.concept.type?"Iglesia local":"Asociación")+" ",1),e.observation?((0,t.wg)(),(0,t.iD)("span",Me," - "+(0,n.zw)(e.observation),1)):(0,t.kq)("",!0)])))),128))])):(0,t.kq)("",!0)])]),"CLOSED"===be.value.state?((0,t.wg)(),(0,t.iD)("td",Le,[e.department?((0,t.wg)(),(0,t.iD)("span",Ze,(0,n.zw)("LOCAL"===e.department.type?"Iglesia local":"Asociación"),1)):(0,t.kq)("",!0),(0,t._)("span",Oe,(0,n.zw)(e.observations),1),"MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("div",Ve,[(0,t.Wm)(s,{name:"today"}),(0,t.Uk)(" "+(0,n.zw)((0,o.SU)(v.WU)(e.date)),1)])):(0,t.kq)("",!0),(null===(r=e.concepts)||void 0===r?void 0:r.length)?((0,t.wg)(),(0,t.iD)("ul",Be,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.concepts,((l,a)=>{var o,i;return(0,t.wg)(),(0,t.iD)("li",{key:a,class:(0,n.C_)({"treasury-line-bottom":(null===(o=e.concepts)||void 0===o?void 0:o.length)>1&&a!==(null===(i=e.concepts)||void 0===i?void 0:i.length)-1})},[(0,t._)("span",$e,(0,n.zw)("LOCAL"===l.concept.type?"Iglesia local":"Asociación"),1),(0,t._)("strong",null,(0,n.zw)(l.concept.label)+": ",1),(0,t.Uk)((0,n.zw)(l.value)+" ",1),l.observation?((0,t.wg)(),(0,t.iD)("span",Ae," - "+(0,n.zw)(l.observation),1)):(0,t.kq)("",!0)],2)})),128))])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("td",Qe,[(0,t._)("span",null,(0,n.zw)(e.value),1)])])})),128))]),(0,t._)("tfoot",null,[(0,t._)("tr",null,[Re,Ie,(0,t._)("th",Te,[(0,t._)("strong",null,(0,n.zw)((0,o.SU)(gl)),1)])])])],2)])):((0,t.wg)(),(0,t.iD)("div",Fe,"Sin registros")),(0,t._)("div",Ye,[(0,t.Wm)(a,{disable:0===Z.value.length,label:"Imprimir todos los recibos","no-caps":"",icon:"print",padding:"10px 20px",class:"btn-close-month",onClick:l[15]||(l[15]=e=>bl(null))},null,8,["disable"])])],2)]),(0,t.Wm)(L,{modelValue:Ge.value,"onUpdate:modelValue":l[17]||(l[17]=e=>Ge.value=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[Ge.value?((0,t.wg)(),(0,t.j4)(O,{key:0,value:Pe.value,name:_.value,"onUpdate:name":l[16]||(l[16]=e=>_.value=e)},null,8,["value","name"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"])])):(0,t.kq)("",!0)}}});var Ne=a(8689),Ke=a(6375),Ge=a(6115),Pe=a(811),Je=a(7011),Xe=a(3414),el=a(2035),ll=a(2350),al=a(2448),tl=a(4689),nl=a(6778),ol=a(6489);const il=je,ul=il;L()(je,"components",{QBtn:D.Z,QForm:Ne.Z,QBtnGroup:Ke.Z,QField:Ge.Z,QIcon:C.Z,QMenu:Pe.Z,QList:Je.Z,QItem:Xe.Z,QItemSection:el.Z,QItemLabel:ll.Z,QSelect:al.Z,QInput:tl.Z,QTable:U.Z,QDialog:nl.Z}),L()(je,"directives",{Ripple:ol.Z})}}]);