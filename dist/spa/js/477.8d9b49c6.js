"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[477],{7281:(e,l,a)=>{a.r(l),a.d(l,{default:()=>il});var t=a(3673),n=a(2323),o=a(1959),i=a(8880),u=a(9405),s=a(8339),r=a(2993),d=a(185),c=a(925),v=a(9236),p=a(8468),m=a(5751),y=a(5198);const w={class:"text-primary"},b=(0,t._)("br",null,null,-1),g=(0,t._)("br",null,null,-1),f={class:"treasury-observation"},_=(0,t.aZ)({__name:"UserSearch",props:{value:null},emits:["name"],setup(e,{emit:l}){const a=e,i="users?all_association=true",u=[{label:"Nombre completo:",align:"left",name:"person.fullname",sortable:!0},{label:"",align:"right"}],s=(0,o.iH)([{label:"Buscar por nombre completo",name:"fullname",type:"input",value:a.value}]),r=(0,o.iH)(!1),d=e=>{l("update:name",{value:e.id,label:e.person.fullname})};return(0,t.bv)((()=>{(0,t.Y3)((()=>{r.value=!0}))})),(e,l)=>{const a=(0,t.up)("q-icon"),o=(0,t.up)("q-toolbar-title"),c=(0,t.up)("q-btn"),v=(0,t.up)("q-toolbar"),p=(0,t.up)("q-td"),m=(0,t.up)("q-tr"),_=(0,t.up)("q-card-section"),k=(0,t.up)("q-card"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(k,{class:"card-roles"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{name:"person_search",size:"md"}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Buscar personas ")])),_:1}),(0,t.wy)((0,t.Wm)(c,{flat:"",round:"",dense:"",icon:"close"},null,512),[[h]])])),_:1}),(0,t.Wm)(_,{class:"search-user"},{default:(0,t.w5)((()=>[r.value?((0,t.wg)(),(0,t.j4)(y.Z,{key:0,columns:u,filters:s.value,"open-filter":!0,url:i,buttonsHidden:"","cols-filter":"col-xs-12 col-sm-12 col-md-12","label-selection":"person.fullname"},{row:(0,t.w5)((e=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>{var l,a,o,i;return[(0,t._)("strong",w,(0,n.zw)(null===(l=e.row.person)||void 0===l?void 0:l.fullname),1),b,(0,t._)("em",null,(0,n.zw)(null===(a=e.row.company)||void 0===a?void 0:a.name),1),g,(0,t._)("strong",f,(0,n.zw)(null===(o=e.row.association)||void 0===o?void 0:o.name)+" - "+(0,n.zw)(null===(i=e.row.association)||void 0===i?void 0:i.country),1)]})),_:2},1024),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(c,{dense:"",size:"md",padding:"3px 10px","no-caps":"",color:"primary",type:"button",onClick:l=>d(e.row),label:"Seleccionar"},null,8,["onClick"]),[[h]])])),_:2},1024)])),_:2},1024)])),_:1},8,["filters"])):(0,t.kq)("",!0)])),_:1})])),_:1})}}});var k=a(151),h=a(9570),q=a(4554),C=a(3747),E=a(2165),D=a(5589),x=a(8186),z=a(3884),W=a(9367),S=a(6429),U=a(677),H=a(7518),M=a.n(H);const L=_,Z=L;M()(_,"components",{QCard:k.Z,QToolbar:h.Z,QIcon:q.Z,QToolbarTitle:C.Z,QBtn:E.Z,QCardSection:D.Z,QTr:x.Z,QTd:z.Z,QCardActions:W.Z,QTable:S.Z}),M()(_,"directives",{ClosePopup:U.Z});var O=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{s(t.next(e))}catch(l){o(l)}}function u(e){try{s(t["throw"](e))}catch(l){o(l)}}function s(e){e.done?a(e.value):n(e.value).then(i,u)}s((t=t.apply(e,l||[])).next())}))};const V={key:0,class:"container"},B={class:"treasury-title"},$={class:"row"},A={key:0,class:"col-xs-12 col-sm-5"},Q={class:"col-xs-12"},R={key:0,class:"col-xs-12",id:"entry-person"},I={class:"popover-users"},T=["placeholder"],F={class:"text-secondary"},Y=(0,t._)("div",{class:"alert alert-info"}," La persona que busca no está registrada ",-1),j={class:"col-xs-12"},N={class:"row"},K={class:"col-xs-6 q-pr-xs",id:"entry-value"},G={class:"col-xs-6"},P={class:"col-xs-12"},J={key:1,class:"col-xs-12"},X={key:2},ee=(0,t._)("h3",{class:"text-warning treasury-subtitle"},"Concepto de donación",-1),le={class:"q-table-simple q-table__container q-table--horizontal-separator column q-table--dense"},ae={class:"q-table"},te=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{class:"text-left"}),(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Concepto")]),(0,t._)("th",{class:"text-right"},[(0,t._)("strong",null,"Valor")])])],-1),ne={class:"width-80"},oe={class:"text-left"},ie={class:"treasury-observation"},ue={key:0},se={class:"text-right"},re=(0,t._)("th",{class:"text-left",colspan:"2"},[(0,t._)("strong",null,"Total")],-1),de={class:"text-right"},ce={class:"col-xs-12"},ve={key:0,class:"text-secondary treasury-subtitle"},pe={key:1,class:"q-table-simple q-table__container q-table--horizontal-separator column q-table--dense q-table--no-wrap"},me={key:0,class:"text-left"},ye=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Nro. Boleta")],-1),we=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"Nombre")],-1),be={key:1,class:"text-left"},ge=(0,t._)("strong",null,"Detalle",-1),fe=[ge],_e=(0,t._)("th",{class:"text-right"},[(0,t._)("strong",null,"Valor")],-1),ke={key:0,class:"width-120"},he={class:"width-120"},qe={class:"text-left"},Ce={key:0},Ee={key:1,class:"text-primary"},De={key:2,class:"treasury-observation"},xe={key:0},ze={key:1},We={class:"q-ml-sm q-mt-xs"},Se={key:0,class:"treasury-list-concepts"},Ue={class:"text-warning"},He={key:0},Me={key:1,class:"text-left"},Le={key:0,class:"treasury-observation"},Ze={class:"text-texto"},Oe={key:1},Ve={key:2,class:"treasury-list-concepts"},Be={class:"treasury-observation"},$e={key:0},Ae={class:"text-right total"},Qe=(0,t._)("th",{class:"text-left",colspan:"2"},null,-1),Re=(0,t._)("th",{class:"text-left"},[(0,t._)("strong",null,"TOTAL")],-1),Ie={class:"text-right"},Te={key:2,class:"treasury-empty"},Fe={class:"text-right q-pt-xs q-gutter-xs"},Ye=(0,t.aZ)({__name:"Entry",setup(e){var l,a;const y=(0,v.o)(),w={member:"Miembro",sympathizer:"Miembro Esc. sabática",visit:"Visita"},b=(0,o.iH)(null),g=(0,o.iH)("MEMBER"),f=(0,o.iH)({value:"",label:""}),_=(0,o.iH)(),k=(0,o.iH)(),h=(0,o.iH)(),q=(0,o.iH)([]),C=(0,o.iH)(),E=(0,o.iH)(!1),D=(0,o.iH)(!1),x=(0,o.iH)([]),z=(0,o.iH)([]),W=(0,o.iH)([]),S=(0,o.iH)([]),U=(0,o.iH)([]),H=(0,o.iH)(-1),M=(0,o.iH)([]),L=(0,o.iH)(),ge=(0,o.iH)(),Ye=(0,o.iH)(!0),je=(0,o.iH)(null),Ne=(0,o.iH)(!1),Ke=(0,o.iH)(""),Ge=(0,o.iH)(),Pe=(0,s.yj)(),{entryId:Je,week:Xe}=Pe.params,el=null===(a=null===(l=y.state.user)||void 0===l?void 0:l.user)||void 0===a?void 0:a.company.id,ll=()=>O(this,void 0,void 0,(function*(){L.value=yield r.http.get(`entries/${parseInt(Je)}`);const e=(0,c.KS)(L.value.year,L.value.month),l=e.find((e=>e.week===parseInt(Xe)));ge.value=l.day;for(let a=0;a<7;a++){const e=new Date(`${L.value.year}-${L.value.month}-${ge.value} 00:00:00`),l=new Date(e.setDate(e.getDate()-a));q.value.push({value:(0,c.Fv)((0,c.WU)(l.toString())),label:`${c.an[l.getDay()]} ${l.getDate()}`})}h.value=q.value[0]})),al=()=>O(this,void 0,void 0,(function*(){const e=yield r.http.get(`entriesdetails?id_entry=${L.value.id}&week=${Xe}&order=-entry_detail.id`);M.value=e.rows})),tl=()=>O(this,void 0,void 0,(function*(){const e=yield r.http.get("departments?order=id");return e.rows.map((e=>({value:e.id,type:e.type,label:e.name,group:e.group})))})),nl=(e,l)=>O(this,void 0,void 0,(function*(){let a="users?order=fullname";a+=e?l?`&fullname=${e}&all_association=true`:`&fullname=${e}&all_churchs=true`:`&id_company=${el}`;const t=yield r.http.get(a,!1);return t.rows.map((e=>{var a,t;return{value:e.id,label:`${e.person.fullname}`,church:`${e.company.name}`,association:l?null===(a=e.association)||void 0===a?void 0:a.name:null,type:null===(t=e.type)||void 0===t?void 0:t.toLowerCase()}}))})),ol=["TITHES","SCOOP","SECOND","TITHE"],il=(e,l)=>{l((()=>{if(""===e)S.value="MEMBER"===g.value?W.value:W.value.filter((e=>!ol.includes(e.group)));else{const l=e.toLowerCase();S.value=W.value.filter((e=>e.label.toLowerCase().indexOf(l)>-1))}}))},ul=()=>O(this,void 0,void 0,(function*(){if("MEMBER"!==g.value){const e=yield je.value.validate();if(!e)return!1}const e={id:b.value,concepts:U.value,type:g.value,id_entry:L.value.id,date:h.value.value,week:Xe};"MEMBER"===g.value?(e.value=ml.value,e.id_user=f.value.value):(e.observations=C.value,e.value=k.value,e.id_department=_.value.value);const l=W.value.find((e=>"YOUNG"===e.group&&"LOCAL"===e.type)).value,a=W.value.find((e=>"YOUNG"===e.group&&"GLOBAL"===e.type)).value;"MEMBER"!==g.value&&!b.value&&[l,a].includes(e.id_department)?((0,d.Confirm)("¿Desea dividir la ofrenda de jóvenes para la Asociación e Iglesia local?",(()=>O(this,void 0,void 0,(function*(){e.value=Number(e.value)/2,e.id_department=l,e.split=!0,yield r.http.post("entriesdetails",e),e.id_department=a,yield r.http.post("entriesdetails",e),yield al()}))),(()=>O(this,void 0,void 0,(function*(){e.split=!1,yield r.http.post("entriesdetails",e),yield al()}))),"Ofrenda de Jóvenes","Si","No"),yield sl()):(b.value?yield r.http.put(`entriesdetails/${b.value}`,e):yield r.http.post("entriesdetails",e),yield al(),yield sl())})),sl=()=>O(this,void 0,void 0,(function*(){je.value.resetValidation(),Ye.value=!1,x.value=z.value,yield(0,t.Y3)((()=>{b.value=null,_.value=null,C.value="",k.value="",H.value=-1,U.value=[],f.value={value:"",label:""},Ye.value=!0,h.value=q.value[0]}))})),rl=e=>O(this,void 0,void 0,(function*(){const l=yield r.http.get(`entriesdetails/${e}`);g.value=l.type,b.value=l.id,"MEMBER"===g.value?(f.value={value:l.user.id,label:l.user.person.fullname},l.id_user=f.value.value,U.value=l.concepts):(C.value=l.observation,k.value=l.value,h.value=q.value.find((e=>e.value===(0,c.Fv)((0,c.WU)(l.date)))),_.value={value:l.department.id,label:l.department.name,type:l.department.type},l.id_department=_.value.value)})),dl=e=>{(0,d.Confirm)("¿Desea eliminar el registro?",(()=>O(this,void 0,void 0,(function*(){yield r.http["delete"](`entriesdetails/${e}`),yield al()}))),null,"Eliminar","Si","No")},cl=()=>{const e={concept:_.value,observation:C.value,value:k.value};H.value>-1?U.value[H.value]=e:U.value.push(e),_.value=null,C.value="",k.value="",H.value=-1},vl=e=>{const l=U.value[e];_.value=l.concept,C.value=l.observation,k.value=l.value,h.value=q.value[0],H.value=e},pl=e=>{U.value.splice(e,1)},ml=(0,t.Fl)((()=>{let e=0;for(const l of U.value)e+=parseFloat(l.value);return e})),yl=(0,t.Fl)((()=>{let e=0;for(const l of M.value)e+=parseFloat(l.value);return e})),wl=e=>O(this,void 0,void 0,(function*(){(null===e||void 0===e?void 0:e.code)&&(yield r.http.put(`entriesdetails/${e.id}`,{code:e.code}))})),bl=e=>O(this,void 0,void 0,(function*(){const l=e?`entries/pdf/detail/${e}`:`entries/pdf/details/${L.value.id}/${Xe}`,a=yield r.http.get(l);(0,m.$)(a,`invoice-${Date.now()}.pdf`)}));(0,t.YP)(_,(e=>{e&&(0,t.Y3)((()=>{document.querySelector("#entry-value input").focus()}))}));const gl=(0,u.Z)((()=>O(this,void 0,void 0,(function*(){var e;""===(null===(e=f.value)||void 0===e?void 0:e.label)?(x.value=z.value,E.value=!0):(D.value=!0,x.value=yield nl(f.value.label),(0,t.Y3)((()=>{D.value=!1,E.value=!0})))}))),400),fl=e=>{f.value=e,E.value=!1},_l=()=>{f.value={label:"",value:""},x.value=z.value,E.value=!1},kl=(e,l)=>O(this,void 0,void 0,(function*(){if("SEARCH"!==l){if(e.length>3&&l){const a=yield r.http.post("users/new",{type:l,fullname:e,id_company:el});f.value={value:a.id,label:a.person.fullname},E.value=!1}}else Ne.value=!1,(0,t.Y3)((()=>{Ke.value=e,Ne.value=!0,E.value=!1}))})),hl=e=>{Ge.value&&!Ge.value.contains(e.target)&&(E.value=!1)};return(0,t.bv)((()=>{document.addEventListener("mousedown",hl)})),(0,t.Ah)((()=>{document.removeEventListener("mousedown",hl)})),(0,t.wF)((()=>O(this,void 0,void 0,(function*(){W.value=yield tl(),S.value=W.value,z.value=yield nl(),x.value=z.value,yield ll(),yield al()})))),(e,l)=>{const a=(0,t.up)("q-btn"),u=(0,t.up)("q-btn-group"),s=(0,t.up)("q-icon"),r=(0,t.up)("q-field"),d=(0,t.up)("q-item-label"),v=(0,t.up)("q-item-section"),m=(0,t.up)("q-item"),y=(0,t.up)("q-list"),z=(0,t.up)("q-select"),W=(0,t.up)("q-input"),H=(0,t.up)("q-form"),O=(0,t.up)("q-dialog"),Pe=(0,t.Q2)("ripple");return L.value?((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("h2",B,[(0,t.Wm)(a,{icon:"arrow_back",round:"",flat:"",onClick:l[0]||(l[0]=l=>e.$router.push(`/treasury/week/${L.value.id}/${e.$route.params.expenseId}`))}),(0,t.Uk)(" Diezmos y ofrendas - Sábado "+(0,n.zw)(ge.value)+" de "+(0,n.zw)((0,o.SU)(c.e7)[L.value.month-1]),1)]),(0,t._)("div",$,["CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("div",A,[Ye.value?((0,t.wg)(),(0,t.j4)(H,{key:0,class:"q-gutter-md",onSubmit:cl,onReset:sl,ref_key:"myForm",ref:je},{default:(0,t.w5)((()=>[(0,t._)("div",Q,[(0,t.Wm)(u,{spread:"",outline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{outline:"MEMBER"!==g.value,padding:"12px",color:"primary",label:"Persona",onClick:l[1]||(l[1]=e=>g.value="MEMBER"),"no-caps":""},null,8,["outline"]),(0,t.Wm)(a,{outline:"CHURCH"!==g.value,padding:"10px",color:"primary",label:"Congregación",onClick:l[2]||(l[2]=e=>g.value="CHURCH"),"no-caps":""},null,8,["outline"])])),_:1})]),"MEMBER"===g.value?((0,t.wg)(),(0,t.iD)("div",R,[(0,t._)("div",I,[(0,t.Wm)(r,{filled:"",modelValue:f.value.label,"onUpdate:modelValue":l[6]||(l[6]=e=>f.value.label=e),"lazy-rules":"",loading:D.value,rules:[e=>!!e||"Seleccione a una persona"],onClick:l[7]||(l[7]=(0,i.iM)((e=>E.value=!E.value),["stop","prevent"]))},{control:(0,t.w5)((()=>{var e;return[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>f.value.label=e),class:"self-center full-width no-outline no-border bg-transparent",type:"text",onInput:l[4]||(l[4]=(...e)=>(0,o.SU)(gl)&&(0,o.SU)(gl)(...e)),placeholder:(null===(e=f.value)||void 0===e?void 0:e.label)?"":"Escriba un nombre",onClick:l[5]||(l[5]=e=>E.value=!E.value)},null,40,T),[[i.nr,f.value.label]])]})),append:(0,t.w5)((()=>{var e;return[(null===(e=f.value)||void 0===e?void 0:e.label)?((0,t.wg)(),(0,t.j4)(s,{key:0,name:"cancel",class:"cursor-pointer",onClick:_l})):(0,t.kq)("",!0),(0,t.Wm)(s,{name:"arrow_drop_down",class:"cursor-pointer"})]})),_:1},8,["modelValue","loading","rules"]),(0,t.wy)((0,t._)("div",{ref_key:"elementUser",ref:Ge,class:"q-menu q-position-engine scroll q-menu--square"},[x.value.length>0?((0,t.wg)(),(0,t.j4)(y,{key:0},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(x.value,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(m,{clickable:"",key:e.value,onClick:l=>fl(e)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1024),(0,t.Wm)(d,{caption:""},{default:(0,t.w5)((()=>[(0,t._)("strong",F,(0,n.zw)(e.association?e.association:w[e.type])+" - ",1),(0,t.Uk)(" "+(0,n.zw)(e.church),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[Pe]]))),128))])),_:1})):((0,t.wg)(),(0,t.j4)(y,{key:1},{default:(0,t.w5)((()=>[Y,(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"secondary",label:"Agregar como miembro de Escuela sabática","no-caps":"",onClick:l[8]||(l[8]=e=>kl(f.value.label,"SYMPATHIZER"))})])),_:1})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"secondary",label:"Agregar como visita",onClick:l[9]||(l[9]=e=>kl(f.value.label,"VISIT"))})])),_:1})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{color:"warning",label:"Buscar en otra Asociación",onClick:l[10]||(l[10]=e=>kl(f.value.label,"SEARCH"))})])),_:1})])),_:1})])),_:1}))],512),[[i.F8,E.value]])])])):(0,t.kq)("",!0),(0,t._)("div",j,[(0,t.Wm)(z,{filled:"",label:"Concepto",modelValue:_.value,"onUpdate:modelValue":l[11]||(l[11]=e=>_.value=e),"use-input":"","use-chips":"","input-debounce":"0",options:S.value,onFilter:il,"lazy-rules":"",rules:[e=>!!e||"Seleccione el concepto"]},{option:(0,t.w5)((e=>[(0,t.Wm)(m,(0,n.vs)((0,t.F4)(e.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,t.Wm)(d,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)("GLOBAL"===e.opt.type?"Asociación":"Iglesia local"),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","rules"])]),(0,t._)("div",N,[(0,t._)("div",K,[(0,t.Wm)(W,{filled:"",label:"Valor",modelValue:k.value,"onUpdate:modelValue":l[12]||(l[12]=e=>k.value=e),"lazy-rules":"",rules:[(0,o.SU)(p.Z).decimal,(0,o.SU)(p.Z).required]},null,8,["modelValue","rules"])]),(0,t._)("div",G,[(0,t.Wm)(z,{filled:"",label:"Fecha",modelValue:h.value,"onUpdate:modelValue":l[13]||(l[13]=e=>h.value=e),options:q.value,rules:[e=>!!e||"Seleccione el concepto"]},null,8,["modelValue","options","rules"])])]),(0,t._)("div",P,[(0,t.Wm)(W,{filled:"",label:"Observaciones",modelValue:C.value,"onUpdate:modelValue":l[14]||(l[14]=e=>C.value=e)},null,8,["modelValue"])]),"MEMBER"===g.value?((0,t.wg)(),(0,t.iD)("div",J,[(0,t.Wm)(a,{padding:"10px",label:"Agregar concepto",icon:"add",color:"warning",type:"submit","no-caps":"",class:"full-width"})])):(0,t.kq)("",!0),"MEMBER"===g.value&&U.value.length?((0,t.wg)(),(0,t.iD)("div",X,[ee,(0,t._)("div",le,[(0,t._)("table",ae,[te,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(U.value,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:e},[(0,t._)("td",ne,[(0,t.Wm)(a,{size:"sm",icon:"edit",onClick:e=>vl(l),round:"",flat:""},null,8,["onClick"]),(0,t.Wm)(a,{size:"sm",icon:"delete",onClick:e=>pl(l),round:"",flat:""},null,8,["onClick"])]),(0,t._)("td",oe,[(0,t.Uk)((0,n.zw)(e.concept.label)+" ",1),(0,t._)("div",ie,[(0,t.Uk)((0,n.zw)("GLOBAL"===e.concept.type?"Asociación":"Iglesia local")+" ",1),e.observation?((0,t.wg)(),(0,t.iD)("span",ue," / "+(0,n.zw)(e.observation),1)):(0,t.kq)("",!0)])]),(0,t._)("td",se,(0,n.zw)(e.value),1)])))),128))]),(0,t._)("tfoot",null,[(0,t._)("tr",null,[re,(0,t._)("th",de,[(0,t._)("strong",null,(0,n.zw)((0,o.SU)(ml)),1)])])])])])])):(0,t.kq)("",!0),(0,t._)("div",ce,[(0,t.Wm)(a,{padding:"10px",label:b.value?"Actualizar recibo":"Guardar recibo",color:"primary","no-caps":"",disable:0===U.value.length&&"MEMBER"===g.value,onClick:ul,icon:"check",class:"full-width"},null,8,["label","disable"]),b.value?((0,t.wg)(),(0,t.j4)(a,{key:0,type:"reset",padding:"10px",label:"Cancelar actualización","no-caps":"",icon:"cancel",class:"full-width q-mt-sm"})):(0,t.kq)("",!0)])])),_:1},512)):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,n.C_)(["col-xs-12 tithe-column",{"col-sm-7":"CLOSED"!==L.value.state,"col-sm-12":"CLOSED"===L.value.state}])},["CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("h3",ve,"Diezmos y ofrendas")):(0,t.kq)("",!0),M.value.length?((0,t.wg)(),(0,t.iD)("div",pe,[(0,t._)("table",{class:(0,n.C_)(["q-table",{"treasury-table-data":"CLOSED"===L.value.state}])},[(0,t._)("thead",null,[(0,t._)("tr",null,["CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("th",me)):(0,t.kq)("",!0),ye,we,"CLOSED"===L.value.state?((0,t.wg)(),(0,t.iD)("th",be,fe)):(0,t.kq)("",!0),_e])]),(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(M.value,(e=>{var l,i,u,r;return(0,t.wg)(),(0,t.iD)("tr",{key:e.id},["CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("td",ke,[(0,t.Wm)(a,{size:"sm",icon:"edit",round:"",flat:"",onClick:l=>rl(e.id)},null,8,["onClick"]),(0,t.Wm)(a,{size:"sm",icon:"delete",round:"",flat:"",onClick:l=>dl(e.id)},null,8,["onClick"]),"MEMBER"===e.type?((0,t.wg)(),(0,t.j4)(a,{key:0,size:"sm",icon:"print",round:"",flat:"",onClick:l=>bl(e.id)},null,8,["onClick"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("td",he,["MEMBER"===e.type?((0,t.wg)(),(0,t.j4)(W,{key:0,modelValue:e.code,"onUpdate:modelValue":l=>e.code=l,dense:"",standout:"",debounce:"500",disable:"CLOSED"===L.value.state,onKeyup:l=>wl(e)},null,8,["modelValue","onUpdate:modelValue","disable","onKeyup"])):(0,t.kq)("",!0)]),(0,t._)("td",qe,["MEMBER"===e.type?((0,t.wg)(),(0,t.iD)("span",Ce,(0,n.zw)(null===(i=null===(l=e.user)||void 0===l?void 0:l.person)||void 0===i?void 0:i.fullname),1)):((0,t.wg)(),(0,t.iD)("strong",Ee,(0,n.zw)(e.department.name),1)),"CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("span",De,["MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("strong",xe,(0,n.zw)("LOCAL"===e.department.type?"Iglesia local":"Asociación"),1)):(0,t.kq)("",!0),"MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("span",ze,[(0,t.Uk)(" - "),(0,t.Wm)(s,{name:"today"}),(0,t.Uk)(" "+(0,n.zw)((0,o.SU)(c.WU)(e.date)),1)])):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,n.zw)(e.observations?` / ${e.observations}`:""),1)])):(0,t.kq)("",!0),(0,t._)("div",We,[(null===(u=e.concepts)||void 0===u?void 0:u.length)&&"CLOSED"!==L.value.state?((0,t.wg)(),(0,t.iD)("ul",Se,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.concepts,((e,l)=>((0,t.wg)(),(0,t.iD)("li",{key:l},[(0,t._)("strong",Ue,"- "+(0,n.zw)(e.concept.label)+": ",1),(0,t.Uk)((0,n.zw)(e.value)+" / "+(0,n.zw)("LOCAL"===e.concept.type?"Iglesia local":"Asociación")+" ",1),e.observation?((0,t.wg)(),(0,t.iD)("span",He," - "+(0,n.zw)(e.observation),1)):(0,t.kq)("",!0)])))),128))])):(0,t.kq)("",!0)])]),"CLOSED"===L.value.state?((0,t.wg)(),(0,t.iD)("td",Me,[e.department?((0,t.wg)(),(0,t.iD)("span",Le,(0,n.zw)("LOCAL"===e.department.type?"Iglesia local":"Asociación"),1)):(0,t.kq)("",!0),(0,t._)("span",Ze,(0,n.zw)(e.observations),1),"MEMBER"!==e.type?((0,t.wg)(),(0,t.iD)("div",Oe,[(0,t.Wm)(s,{name:"today"}),(0,t.Uk)(" "+(0,n.zw)((0,o.SU)(c.WU)(e.date)),1)])):(0,t.kq)("",!0),(null===(r=e.concepts)||void 0===r?void 0:r.length)?((0,t.wg)(),(0,t.iD)("ul",Ve,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.concepts,((l,a)=>{var o,i;return(0,t.wg)(),(0,t.iD)("li",{key:a,class:(0,n.C_)({"treasury-line-bottom":(null===(o=e.concepts)||void 0===o?void 0:o.length)>1&&a!==(null===(i=e.concepts)||void 0===i?void 0:i.length)-1})},[(0,t._)("span",Be,(0,n.zw)("LOCAL"===l.concept.type?"Iglesia local":"Asociación"),1),(0,t._)("strong",null,(0,n.zw)(l.concept.label)+": ",1),(0,t.Uk)((0,n.zw)(l.value)+" ",1),l.observation?((0,t.wg)(),(0,t.iD)("span",$e," - "+(0,n.zw)(l.observation),1)):(0,t.kq)("",!0)],2)})),128))])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("td",Ae,[(0,t._)("span",null,(0,n.zw)(e.value),1)])])})),128))]),(0,t._)("tfoot",null,[(0,t._)("tr",null,[Qe,Re,(0,t._)("th",Ie,[(0,t._)("strong",null,(0,n.zw)((0,o.SU)(yl)),1)])])])],2)])):((0,t.wg)(),(0,t.iD)("div",Te,"Sin registros")),(0,t._)("div",Fe,[(0,t.Wm)(a,{disable:0===M.value.length,label:"Imprimir todos los recibos","no-caps":"",icon:"print",padding:"10px 20px",class:"btn-close-month",onClick:l[15]||(l[15]=e=>bl(null))},null,8,["disable"])])],2)]),(0,t.Wm)(O,{modelValue:Ne.value,"onUpdate:modelValue":l[17]||(l[17]=e=>Ne.value=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[Ne.value?((0,t.wg)(),(0,t.j4)(Z,{key:0,value:Ke.value,name:f.value,"onUpdate:name":l[16]||(l[16]=e=>f.value=e)},null,8,["value","name"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"])])):(0,t.kq)("",!0)}}});var je=a(8689),Ne=a(6375),Ke=a(6115),Ge=a(811),Pe=a(7011),Je=a(3414),Xe=a(2035),el=a(2350),ll=a(2448),al=a(4689),tl=a(6778),nl=a(6489);const ol=Ye,il=ol;M()(Ye,"components",{QBtn:E.Z,QForm:je.Z,QBtnGroup:Ne.Z,QField:Ke.Z,QIcon:q.Z,QMenu:Ge.Z,QList:Pe.Z,QItem:Je.Z,QItemSection:Xe.Z,QItemLabel:el.Z,QSelect:ll.Z,QInput:al.Z,QTable:S.Z,QDialog:tl.Z}),M()(Ye,"directives",{Ripple:nl.Z})}}]);