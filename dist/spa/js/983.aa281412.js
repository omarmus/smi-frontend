"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[983],{2983:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var n=o(3673),l=o(2323),s=o(1959),a=o(8339),i=o(2993),r=o(4781),u=o(925),d=o(9236),c=function(e,t,o,n){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,s){function a(e){try{r(n.next(e))}catch(t){s(t)}}function i(e){try{r(n["throw"](e))}catch(t){s(t)}}function r(e){e.done?o(e.value):l(e.value).then(a,i)}r((n=n.apply(e,t||[])).next())}))};const v={class:"container"},p={class:"treasury-title"},m={class:"q-pb-md"},w={key:0,class:"row treasury-row"},h={class:"q-pb-sm"},y={class:"btn-block-detail"},f=(0,n._)("strong",null,"Ingresos:",-1),g={class:"text-primary"},k={class:"btn-block-detail"},_=(0,n._)("strong",null,"Gastos:",-1),b={class:"text-primary"},x={key:1,class:"alert alert-info"},C=(0,n.aZ)({__name:"MonthReport",setup(e){var t,o,C;const q=(0,d.o)(),D=(0,a.tv)(),$=(0,s.iH)((new Date).getFullYear()),z=(0,s.iH)(),S=null===(C=null===(o=null===(t=q.state.user)||void 0===t?void 0:t.user)||void 0===o?void 0:o.company)||void 0===C?void 0:C.id,E=(0,u.V4)(),U=(e=!1)=>c(this,void 0,void 0,(function*(){const t=e?10:1;for(let o=0;o<t;o++){const t=yield i.http.get(`entries?year=${$.value}&id_company=${S}&order=month&state=CLOSED`),o=yield i.http.get(`expenses?year=${$.value}&id_company=${S}&order=month&state=CLOSED`);if(t.count>0||!e){z.value=t.rows.map(((e,t)=>(e.idExpense=o.rows[t].id,e.totalExpense=o.rows[t].total,e)));break}$.value--}})),F=()=>D.push("/treasury/reports"),V=e=>(r.storage.set("report",!0),D.push(`/treasury/report/${String(e.id)}/${String(e.idExpense)}`));return(0,n.YP)($,(()=>c(this,void 0,void 0,(function*(){yield U()})))),(0,n.wF)((()=>c(this,void 0,void 0,(function*(){yield U(!0)})))),(e,t)=>{var o,a;const i=(0,n.up)("q-btn"),r=(0,n.up)("q-select"),d=(0,n.up)("q-icon");return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("h2",p,[(0,n.Wm)(i,{icon:"arrow_back",round:"",flat:"",onClick:F}),(0,n.Uk)(" Informe mensual - Gesti칩n "+(0,l.zw)($.value),1)]),(0,n._)("div",m,[(0,n.Wm)(r,{filled:"",modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e),options:(0,s.SU)(E),label:"Gesti칩n"},null,8,["modelValue","options"])]),0!==(null===(o=z.value)||void 0===o?void 0:o.length)?((0,n.wg)(),(0,n.iD)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(z.value,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"col-xs-6 col-sm-3 q-pa-sm",key:t.month},[(0,n.Wm)(i,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:e=>V(t),class:(0,l.C_)(["full-width btn-block",t.state.toLowerCase()])},{default:(0,n.w5)((()=>{var o,a,i,r,c,v;return[(0,n._)("strong",h,(0,l.zw)((0,s.SU)(u.e7)[t.month-1]),1),(0,n._)("span",y,[f,(0,n.Uk)(),(0,n._)("span",g,(0,l.zw)(Number(t.total).toFixed(2))+" "+(0,l.zw)(null===(i=null===(a=null===(o=e.$store.state.user)||void 0===o?void 0:o.user)||void 0===a?void 0:a.company)||void 0===i?void 0:i.money),1)]),(0,n._)("span",k,[_,(0,n.Uk)(),(0,n._)("span",b,(0,l.zw)(Number(t.totalExpense).toFixed(2))+" "+(0,l.zw)(null===(v=null===(c=null===(r=e.$store.state.user)||void 0===r?void 0:r.user)||void 0===c?void 0:c.company)||void 0===v?void 0:v.money),1)]),(0,n.Wm)(d,{name:"calendar_month"})]})),_:2},1032,["onClick","class"])])))),128))])):(0,n.kq)("",!0),0===(null===(a=z.value)||void 0===a?void 0:a.length)?((0,n.wg)(),(0,n.iD)("div",x," No existe datos para el a침o "+(0,l.zw)($.value)+", seleccione otra gesti칩n. ",1)):(0,n.kq)("",!0)])}}});var q=o(2165),D=o(2448),$=o(4554),z=o(7518),S=o.n(z);const E=C,U=E;S()(C,"components",{QBtn:q.Z,QSelect:D.Z,QIcon:$.Z})}}]);