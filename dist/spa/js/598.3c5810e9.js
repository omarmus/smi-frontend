"use strict";(self["webpackChunksmi_frontend"]=self["webpackChunksmi_frontend"]||[]).push([[598],{925:(e,t,n)=>{n.d(t,{e7:()=>s,KS:()=>a,WU:()=>l,Fv:()=>o});const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a=(e,t)=>{const n=new Date(e,t,0).getDate(),s=new Date(e,t-1,1),a=[];for(let l=6-s.getDay(),o=1;l<n;l+=7,o++)a.push({day:l+1,label:`Sábado ${l+1}`,week:o,total:0});return a},l=e=>{if(!e)return null;const t=new Date(e);return[t.getUTCDate(),t.getUTCMonth()+1,t.getUTCFullYear()].join("/")},o=e=>e?[e.split("/")[2],e.split("/")[1],e.split("/")[0]].join("-"):null},7598:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var s=n(3673),a=n(2323),l=n(1959),o=n(9582),r=n(2993),i=n(925),u=n(9236),c=function(e,t,n,s){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{i(s.next(e))}catch(t){l(t)}}function r(e){try{i(s["throw"](e))}catch(t){l(t)}}function i(e){e.done?n(e.value):a(e.value).then(o,r)}i((s=s.apply(e,t||[])).next())}))};const d={class:"container"},p={class:"treasury-title"},v={class:"q-pb-md"},m=(0,s._)("div",{class:"alert alert-info"}," Seleccione el mes que quiere ver/editar ",-1),w={class:"row treasury-row"},b={class:"q-pb-sm"},y={class:"btn-block-detail"},f=(0,s._)("strong",null,"Ingresos:",-1),h=(0,s.Uk)(),g={class:"text-primary"},k={class:"btn-block-detail"},_=(0,s._)("strong",null,"Gastos:",-1),x=(0,s.Uk)(),D={class:"text-primary"},C=(0,s.aZ)({setup(e){var t,n;const C=(0,u.useStore)(),$=(0,o.tv)(),q=(0,l.iH)((new Date).getFullYear()),E=(0,l.iH)(),U=null===(n=null===(t=C.state.user)||void 0===t?void 0:t.user)||void 0===n?void 0:n.company.id,S=[{value:2022,label:"2022"}],F=()=>c(this,void 0,void 0,(function*(){const e=yield r.http.get(`entries/year/${q.value}/${U}`),t=yield r.http.get(`expenses/year/${q.value}/${U}`);E.value=e.rows.map(((e,n)=>(e.idExpense=t.rows[n].id,e.totalExpense=t.rows[n].total,e)))})),z=()=>{const e=E.value.find((e=>"ACTIVE"===e.state));return $.push(e?`/treasury/entryexpense/${e.id}/${e.idExpense}`:"/treasury")};return(0,s.wF)((()=>c(this,void 0,void 0,(function*(){yield F()})))),(e,t)=>{const n=(0,s.up)("q-btn"),o=(0,s.up)("q-select"),r=(0,s.up)("q-icon");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("h2",p,[(0,s.Wm)(n,{icon:"arrow_back",round:"",flat:"",onClick:z}),(0,s.Uk)(" Ingresos y gastos - Gestión "+(0,a.zw)(q.value),1)]),(0,s._)("div",v,[(0,s.Wm)(o,{filled:"",modelValue:q.value,"onUpdate:modelValue":t[0]||(t[0]=e=>q.value=e),options:S,label:"Gestión"},null,8,["modelValue"])]),m,(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(E.value,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-xs-6 col-sm-3 q-pa-sm",key:t.month},[(0,s.Wm)(n,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:n=>e.$router.push(`/treasury/entryexpense/${t.id}/${t.idExpense}`),class:(0,a.C_)(["full-width btn-block",t.state.toLowerCase()]),disable:"PENDING"===t.state},{default:(0,s.w5)((()=>[(0,s._)("strong",b,(0,a.zw)((0,l.SU)(i.e7)[t.month-1]),1),(0,s._)("span",y,[f,h,(0,s._)("span",g,(0,a.zw)(Number(t.total).toFixed(2))+" Bs.",1)]),(0,s._)("span",k,[_,x,(0,s._)("span",D,(0,a.zw)(Number(t.totalExpense).toFixed(2))+" Bs.",1)]),(0,s.Wm)(r,{name:"calendar_month"}),"CLOSED"===t.state?((0,s.wg)(),(0,s.j4)(r,{key:0,name:"check_circle",color:"positive",size:"sm",class:"treasury-check"})):(0,s.kq)("",!0)])),_:2},1032,["onClick","class","disable"])])))),128))])])}}});var $=n(8240),q=n(2448),E=n(4554),U=n(7518),S=n.n(U);const F=C,z=F;S()(C,"components",{QBtn:$.Z,QSelect:q.Z,QIcon:E.Z})}}]);