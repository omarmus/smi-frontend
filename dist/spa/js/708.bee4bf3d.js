"use strict";(self["webpackChunksmi_frontend"]=self["webpackChunksmi_frontend"]||[]).push([[708],{925:(t,l,e)=>{e.d(l,{e7:()=>s,KS:()=>o,WU:()=>a,Fv:()=>i});const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=(t,l)=>{const e=new Date(t,l,0).getDate(),s=new Date(t,l-1,1),o=[];for(let a=6-s.getDay(),i=1;a<e;a+=7,i++)o.push({day:a+1,label:`Sábado ${a+1}`,week:i,total:0});return o},a=t=>{if(!t)return null;const l=new Date(t);return[l.getUTCDate(),l.getUTCMonth()+1,l.getUTCFullYear()].join("/")},i=t=>t?[t.split("/")[2],t.split("/")[1],t.split("/")[0]].join("-"):null},4708:(t,l,e)=>{e.r(l),e.d(l,{default:()=>It});var s=e(3673),o=e(1959),a=e(2323),i=e(9582),r=e(2993),c=e(925),n=function(t,l,e,s){function o(t){return t instanceof e?t:new e((function(l){l(t)}))}return new(e||(e=Promise))((function(e,a){function i(t){try{c(s.next(t))}catch(l){a(l)}}function r(t){try{c(s["throw"](t))}catch(l){a(l)}}function c(t){t.done?e(t.value):o(t.value).then(i,r)}c((s=s.apply(t,l||[])).next())}))};const d={key:0,class:"container"},u={class:"treasury-title"},_={class:"row q-col-gutter-x-lg"},v={class:"col-xs-12 col-sm-6"},p=(0,s._)("div",{class:"row justify-start"},[(0,s._)("h3",{class:"text-primary treasury-subtitle col-xs-12 col-sm-11"},"Ingreso por departamento - Iglesia local")],-1),m={class:"col-8"},w={class:"col-xs-4 col-sm-3 text-right"},y={class:"row justify-start"},g={class:"col-xs-12 col-sm-11"},f={class:"row justify-start"},h=(0,s._)("div",{class:"col-8"},[(0,s._)("strong",null,"Total:")],-1),x={class:"col-xs-4 col-sm-3 text-right"},b={class:"col-xs-12 col-sm-6"},k=(0,s._)("div",{class:"row justify-end"},[(0,s._)("h3",{class:"text-primary treasury-subtitle col-xs-12 col-sm-11"},"Ingreso por departamento - Asociación")],-1),q={class:"col-8"},z={class:"col-xs-4 col-sm-3 text-right"},U={class:"row justify-end"},D={class:"col-xs-12 col-sm-11"},j={class:"row justify-end"},S=(0,s._)("div",{class:"col-8"},[(0,s._)("strong",null,"Total:")],-1),H={class:"col-xs-4 col-sm-3 text-right"},T={class:"row q-mt-lg justify-center q-col-gutter-x-lg"},W={class:"col-xs-12 col-sm-6"},B=(0,s._)("div",{class:"row justify-start"},[(0,s._)("h3",{class:"text-primary treasury-subtitle col-xs-12 col-sm-11"},"Ingreso semanal")],-1),E={class:"col-8"},F={class:"col-xs-4 col-sm-3 text-right"},I={class:"row justify-start"},N={class:"col-xs-12 col-sm-11"},$={class:"row justify-start"},Z=(0,s._)("div",{class:"col-8"},[(0,s._)("strong",null,"Total:")],-1),C={class:"col-xs-4 col-sm-3 text-right"},Q={class:"col-xs-12 col-sm-6"},V={class:"row justify-end"},A={class:"col-xs-12 col-sm-11"},K=(0,s._)("h3",{class:"text-primary treasury-subtitle"},"Estado del depósito",-1),Y={class:"row q-pb-xs"},M=(0,s._)("div",{class:"col-7"},"Total a depositar",-1),O={class:"col-xs-5 col-sm-5"},L={class:"self-center full-width no-outline",tabindex:"0"},G={class:"row q-pb-xs"},P=(0,s._)("div",{class:"col-7"},"Total depositado",-1),J={class:"col-xs-5 col-sm-5"},R={class:"self-center full-width no-outline",tabindex:"0"},X={class:"row q-pb-xs"},tt=(0,s._)("div",{class:"col-7"},"Fecha del depósito",-1),lt={class:"col-xs-5 col-sm-5"},et=(0,s._)("div",{class:"self-center full-width no-outline",tabindex:"0"},"12/03/2022",-1),st={class:"row row q-pb-sm"},ot={class:"col"},at={class:"text-right"},it={class:"row q-mt-sm justify-center"},rt={class:"col-xs-12"},ct=(0,s._)("h3",{class:"text-primary treasury-subtitle"},"Gastos del mes",-1),nt={class:"q-table-simple q-table__container q-table--horizontal-separator column no-wrap q-table--dense q-table--no-wrap"},dt={class:"q-table treasury-table-data"},ut=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},[(0,s._)("strong",null,"Descripción")]),(0,s._)("th",{class:"text-left"},[(0,s._)("strong",null,"Datos de facturación")]),(0,s._)("th",{class:"text-right"},[(0,s._)("strong",null,"Valor")])])],-1),_t={class:"text-left"},vt={class:"treasury-departament"},pt={class:"text-left"},mt={class:"treasury-list-concepts"},wt={key:0},yt=(0,s._)("strong",null,"Tipo de documento:",-1),gt={key:1},ft=(0,s._)("strong",null,"Número de documento:",-1),ht={key:2},xt=(0,s._)("strong",null,"Proveedor:",-1),bt={class:"text-right total"},kt=(0,s._)("th",{class:"text-left",colspan:"2"},[(0,s._)("strong",null,"Total")],-1),qt={class:"text-right"},zt=(0,s.aZ)({setup(t){const l=(0,o.iH)([]),e=(0,o.iH)([]),zt=(0,o.iH)([]),Ut=(0,o.iH)([]),Dt=(0,o.iH)([]),jt=(0,o.iH)(0),St=(0,o.iH)(0),Ht=(0,o.iH)(),Tt=(0,i.yj)(),{entryId:Wt,expenseId:Bt}=Tt.params,Et=9,Ft=()=>n(this,void 0,void 0,(function*(){const t=`flows?id_company=${Et}&type=MONTH&type_treasury=ENTRY&type_department=GLOBAL&order=department.id`,e=yield r.http.get(t);l.value=e.rows})),It=()=>n(this,void 0,void 0,(function*(){const t=`flows?id_company=${Et}&type=MONTH&type_treasury=EXPENSE&type_department=LOCAL&order=department.id`,l=yield r.http.get(t);e.value=l.rows})),Nt=()=>n(this,void 0,void 0,(function*(){Ut.value=yield r.http.get(`entries/${parseInt(Wt)}`),Dt.value=(0,c.KS)(Ut.value.year,Ut.value.month);const t=yield r.http.get(`entries/details?id_entry=${Ut.value.id}`),l={1:{total:0,local:0,global:0},2:{total:0,local:0,global:0},3:{total:0,local:0,global:0},4:{total:0,local:0,global:0},5:{total:0,local:0,global:0}};t.rows.forEach((t=>{l[t.week].global+=Number(t.value)})),jt.value=0,Dt.value.forEach((t=>{t.total=l[t.week].global,jt.value+=t.total}))})),$t=()=>n(this,void 0,void 0,(function*(){const t=yield r.http.get(`expenses/details?id_expense=${Bt}`);zt.value=t.rows})),Zt=(0,o.Fl)((()=>{let t=0;return l.value.forEach((l=>{t+=Number(l.total)})),t})),Ct=(0,o.Fl)((()=>{let t=0;return e.value.forEach((l=>{t+=Number(l.total)})),t})),Qt=(0,o.Fl)((()=>{let t=0;for(const l of zt.value)t+=parseFloat(l.value);return t}));return(0,s.bv)((()=>n(this,void 0,void 0,(function*(){yield Ft(),yield It(),yield Nt(),yield $t()})))),(t,i)=>{const r=(0,s.up)("q-btn"),n=(0,s.up)("q-separator"),Tt=(0,s.up)("q-field"),Et=(0,s.up)("q-input"),Ft=(0,s.up)("q-icon"),It=(0,s.up)("q-file");return Ut.value?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("h2",u,[(0,s.Wm)(r,{icon:"arrow_back",round:"",flat:"",onClick:i[0]||(i[0]=l=>t.$router.push(`/treasury/entryexpense/${(0,o.SU)(Wt)}/${(0,o.SU)(Bt)}`))}),(0,s.Uk)(" Informe mensual "+(0,a.zw)((0,o.SU)(c.e7)[Ut.value.month-1]),1)]),(0,s._)("div",_,[(0,s._)("div",v,[p,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.value,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"row justify-start"},[(0,s._)("div",m,(0,a.zw)(t.department.name),1),(0,s._)("div",w,(0,a.zw)(.9*t.total)+" Bs.",1)])))),128)),(0,s._)("div",y,[(0,s._)("div",g,[(0,s.Wm)(n)])]),(0,s._)("div",f,[h,(0,s._)("div",x,[(0,s._)("strong",null,(0,a.zw)(.9*(0,o.SU)(Ct))+" Bs.",1)])])]),(0,s._)("div",b,[k,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.value,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"row justify-end"},[(0,s._)("div",q,(0,a.zw)(t.department.name),1),(0,s._)("div",z,(0,a.zw)(t.total)+" Bs.",1)])))),128)),(0,s._)("div",U,[(0,s._)("div",D,[(0,s.Wm)(n)])]),(0,s._)("div",j,[S,(0,s._)("div",H,[(0,s._)("strong",null,(0,a.zw)((0,o.SU)(Zt))+" Bs.",1)])])])]),(0,s._)("div",T,[(0,s._)("div",W,[B,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Dt.value,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"row justify-start"},[(0,s._)("div",E,(0,a.zw)(t.label)+" de "+(0,a.zw)((0,o.SU)(c.e7)[Ut.value.month-1]),1),(0,s._)("div",F,(0,a.zw)(t.total)+" Bs.",1)])))),128)),(0,s._)("div",I,[(0,s._)("div",N,[(0,s.Wm)(n)])]),(0,s._)("div",$,[Z,(0,s._)("div",C,[(0,s._)("strong",null,(0,a.zw)(jt.value)+" Bs.",1)])])]),(0,s._)("div",Q,[(0,s._)("div",V,[(0,s._)("div",A,[K,(0,s._)("div",Y,[M,(0,s._)("div",O,[(0,s.Wm)(Tt,{standout:"",class:"text-right",dense:"",placeholder:"0",suffix:"Bs."},{control:(0,s.w5)((()=>[(0,s._)("div",L,(0,a.zw)((0,o.SU)(Zt)),1)])),_:1})])]),(0,s._)("div",G,[P,(0,s._)("div",J,[(0,s.Wm)(Et,{modelValue:St.value,"onUpdate:modelValue":i[1]||(i[1]=t=>St.value=t),standout:"",class:"text-right",dense:"",placeholder:"0",suffix:"Bs."},{control:(0,s.w5)((()=>[(0,s._)("div",R,(0,a.zw)((0,o.SU)(Zt)),1)])),_:1},8,["modelValue"])])]),(0,s._)("div",X,[tt,(0,s._)("div",lt,[(0,s.Wm)(Tt,{standout:"",class:"text-right",dense:"",placeholder:"0"},{control:(0,s.w5)((()=>[et])),_:1})])]),(0,s._)("div",st,[(0,s._)("div",ot,[(0,s.Wm)(It,{standout:"",modelValue:Ht.value,"onUpdate:modelValue":i[2]||(i[2]=t=>Ht.value=t),dense:"",label:"Adjuntar comprobante"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(Ft,{name:"attach_file"})])),_:1},8,["modelValue"])])]),(0,s._)("div",at,[(0,s.Wm)(r,{label:"Guardar datos del depósito",icon:"check",color:"primary","no-caps":""})])])])])]),(0,s._)("div",it,[(0,s._)("div",rt,[ct,(0,s._)("div",nt,[(0,s._)("table",dt,[ut,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(zt.value,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",_t,[(0,s.Uk)((0,a.zw)(t.concept)+" ",1),(0,s._)("strong",vt,(0,a.zw)(t.department.name),1),(0,s._)("em",null,"Registrado el "+(0,a.zw)((0,o.SU)(c.WU)(t.date)),1)]),(0,s._)("td",pt,[(0,s._)("ul",mt,[t.document_type?((0,s.wg)(),(0,s.iD)("li",wt,[yt,(0,s.Uk)(" "+(0,a.zw)(t.document_type),1)])):(0,s.kq)("",!0),t.document_number?((0,s.wg)(),(0,s.iD)("li",gt,[ft,(0,s.Uk)(" "+(0,a.zw)(t.document_number),1)])):(0,s.kq)("",!0),t.supplier?((0,s.wg)(),(0,s.iD)("li",ht,[xt,(0,s.Uk)(" "+(0,a.zw)(t.supplier),1)])):(0,s.kq)("",!0)])]),(0,s._)("td",bt,(0,a.zw)(t.value),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[kt,(0,s._)("th",qt,[(0,s._)("strong",null,(0,a.zw)((0,o.SU)(Qt)),1)])])])])])])])])):(0,s.kq)("",!0)}}});var Ut=e(8240),Dt=e(5869),jt=e(6115),St=e(4689),Ht=e(1052),Tt=e(4554),Wt=e(6429),Bt=e(7518),Et=e.n(Bt);const Ft=zt,It=Ft;Et()(zt,"components",{QBtn:Ut.Z,QSeparator:Dt.Z,QField:jt.Z,QInput:St.Z,QFile:Ht.Z,QIcon:Tt.Z,QTable:Wt.Z})}}]);