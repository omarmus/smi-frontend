"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[606],{2487:(e,l,o)=>{o.r(l),o.d(l,{default:()=>$});var a=o(3673),t=o(1959),u=o(2323),n=o(2993),i=o(4626),r=o(5198),d=o(6872),s=o(8468),c=o(8719),p=o(9236),m=function(e,l,o,a){function t(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,u){function n(e){try{r(a.next(e))}catch(l){u(l)}}function i(e){try{r(a["throw"](e))}catch(l){u(l)}}function r(e){e.done?o(e.value):t(e.value).then(n,i)}r((a=a.apply(e,l||[])).next())}))};const v={class:"container"},b={class:"treasury-title"},w={class:"row q-col-gutter-md"},C={class:"col-xs-12 col-md-12"},A={class:"col-xs-12 col-md-12"},I={class:"col-xs-12 col-md-5"},O=(0,a._)("div",null,"Departamento de la:",-1),S={class:"col-xs-12 col-md-7"},f={class:"col-xs-12 text-right q-gutter-sm"},g=(0,a.aZ)({__name:"Departament",setup(e){var l,o,g,E,T,U;const k=(0,p.o)(),y="departments",N=[c.j.SUPERADMINISTRATOR].includes(null===(g=null===(o=null===(l=null===k||void 0===k?void 0:k.state)||void 0===l?void 0:l.user)||void 0===o?void 0:o.role)||void 0===g?void 0:g.slug),_=[c.j.ADMINISTRATOR_UNION,c.j.ADMINISTRATOR_ASSOCIATION].includes(null===(U=null===(T=null===(E=null===k||void 0===k?void 0:k.state)||void 0===E?void 0:E.user)||void 0===T?void 0:T.role)||void 0===U?void 0:U.slug),V=[{label:"Acciones",align:"center",sortable:!1},{name:"name",label:"Nombre",align:"left",sortable:!0},{name:"description",label:"Descripción",align:"left",sortable:!0},{name:"group",label:"Tipo",align:"left",sortable:!0},{name:"type",label:"Pertenece a",sortable:!0},{name:"state",label:"Estado",sortable:!0}],q=[{value:"GLOBAL",label:"ASOCIACION"},{value:"LOCAL",label:"IGLESIA LOCAL"}],L=_||N?[{value:"TITHES",label:"DIEZMOS"},{value:"SCOOP",label:"PRIMICIAS"},{value:"SECOND",label:"SEGUNDO DIEZMO"},{value:"TITHE",label:"DIEZMO DE IGLESIA"},{value:"MUNDIAL",label:"ASOCIACION GENERAL"},{value:"ASSOCIATION",label:"ASOCIACIÓN"},{value:"DEPARTMENT",label:"DEPARTAMENTO"},{value:"CHURCH",label:"IGLESIA"},{value:"EVENT",label:"POBRES"},{value:"YOUNG",label:"JOVENES"},{value:"OTHER",label:"OTROS"}]:[{value:"DEPARTMENT",label:"DEPARTAMENTO"},{value:"CHURCH",label:"IGLESIA"},{value:"EVENT",label:"POBRES"},{value:"YOUNG",label:"JOVENES"},{value:"OTHER",label:"OTROS"}],h=[{label:"Nombre",name:"name",type:"input"},{label:"Tipo",name:"type",type:"select",options:L},{label:"Pertenece a",name:"type",type:"select",options:q},{label:"Estado",name:"state",type:"select",options:[{label:"ACTIVO",value:"ACTIVE"},{label:"INACTIVO",value:"INACTIVE"}]}],W={LOCAL:{color:"warning",textColor:"white",label:"IGLESIA LOCAL"},GLOBAL:{color:"positive",textColor:"white",label:"ASOCIACION"},ACTIVE:{color:"positive",textColor:"white",label:"ACTIVO"},INACTIVE:{color:"warning",textColor:"white",label:"INACTIVO"}},R={name:[s.Z.required],description:[],type:[s.Z.required],group:[s.Z.required]},Z=(0,t.iH)(),x=(0,t.iH)(),D=e=>{const l=L.find((l=>l.value===e));return(null===l||void 0===l?void 0:l.label)||""},G=()=>m(this,void 0,void 0,(function*(){const e=yield n.http.get("companies");x.value=e.rows})),Q=(e,l)=>m(this,void 0,void 0,(function*(){Z.value=l?yield n.http.get(`${y}/${l}`):{name:"",description:"",group:"",type:_||N?"GLOBAL":"LOCAL"},e()})),$=e=>m(this,void 0,void 0,(function*(){var l,o;(null===(l=Z.value)||void 0===l?void 0:l.id)?(yield n.http.put(`${y}/${String(null===(o=Z.value)||void 0===o?void 0:o.id)}`,Z.value),i.message.success("¡Registro actualizado!")):(yield n.http.post(y,Z.value),i.message.success("¡Registro creado exitósamente!")),e.update(),e.close()}));return(0,a.wF)((()=>m(this,void 0,void 0,(function*(){yield G()})))),(e,l)=>{const o=(0,a.up)("q-btn"),n=(0,a.up)("q-tooltip"),i=(0,a.up)("q-icon"),s=(0,a.up)("q-toolbar-title"),c=(0,a.up)("q-toolbar"),p=(0,a.up)("q-input"),m=(0,a.up)("q-radio"),g=(0,a.up)("q-select"),E=(0,a.up)("q-form"),T=(0,a.up)("q-card-section"),U=(0,a.up)("q-card"),k=(0,a.up)("q-toggle"),q=(0,a.up)("q-td"),x=(0,a.up)("q-chip"),G=(0,a.up)("q-tr");return(0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("h2",b,[(0,a.Wm)(o,{icon:"arrow_back",round:"",flat:"",onClick:l[0]||(l[0]=l=>e.$router.push("/secretary"))}),(0,a.Uk)(" Departamentos ")]),(0,a.Wm)(r.Z,{url:y,filters:h,columns:V,order:"id"},{buttons:(0,a.w5)((l=>{var u,i;return[(null===(i=null===(u=e.$store.state.user)||void 0===u?void 0:u.permissions)||void 0===i?void 0:i.includes("department:create"))&&((0,t.SU)(_)||(0,t.SU)(N))?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"q-ml-none q-mr-xs",icon:"add","no-caps":"",color:"primary",onClick:e=>Q(l.open)},{default:(0,a.w5)((()=>[(0,a.Uk)(" Agregar "),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Agregar registro")])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0)]})),form:(0,a.w5)((e=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"apartment",size:"md"}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(Z.value.id?"Editar":"Agregar")+" departamento ",1)])),_:1}),(0,a.Wm)(o,{flat:"",round:"",dense:"",icon:"close",onClick:e.close},null,8,["onClick"])])),_:2},1024),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,{onSubmit:l=>$(e)},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a._)("div",C,[(0,a.Wm)(p,{label:"Nombre",filled:"",modelValue:Z.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>Z.value.name=e),rules:R.name,autofocus:""},null,8,["modelValue","rules"])]),(0,a._)("div",A,[(0,a.Wm)(p,{label:"Descripción",filled:"",modelValue:Z.value.description,"onUpdate:modelValue":l[2]||(l[2]=e=>Z.value.description=e),rules:R.description},null,8,["modelValue","rules"])]),(0,a._)("div",I,[O,(0,t.SU)(_)||(0,t.SU)(N)?((0,a.wg)(),(0,a.j4)(m,{key:0,modelValue:Z.value.type,"onUpdate:modelValue":l[3]||(l[3]=e=>Z.value.type=e),val:"GLOBAL",label:"ASOCIACION"},null,8,["modelValue"])):(0,a.kq)("",!0),(0,a.Wm)(m,{disable:!((0,t.SU)(_)||(0,t.SU)(N)),modelValue:Z.value.type,"onUpdate:modelValue":l[4]||(l[4]=e=>Z.value.type=e),val:"LOCAL",label:"IGLESIA LOCAL"},null,8,["disable","modelValue"])]),(0,a._)("div",S,[(0,a.Wm)(g,{label:"Tipo",filled:"",modelValue:Z.value.group,"onUpdate:modelValue":l[5]||(l[5]=e=>Z.value.group=e),options:(0,t.SU)(L),rules:R.type,"emit-value":"","map-options":""},null,8,["modelValue","options","rules"])]),(0,a._)("div",f,[(0,a.Wm)(o,{icon:"close",label:"Cancelar",onClick:e.close},null,8,["onClick"]),(0,a.Wm)(o,{icon:"check",color:"secondary",label:"Guardar",type:"submit"})])])])),_:2},1032,["onSubmit"])])),_:2},1024)])),_:2},1024)])),row:(0,a.w5)((l=>[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>{var u,i,r,s;return[(null===(i=null===(u=e.$store.state.user)||void 0===u?void 0:u.permissions)||void 0===i?void 0:i.includes("department:update"))&&((0,t.SU)(_)||(0,t.SU)(N))?((0,a.wg)(),(0,a.j4)(o,{key:0,flat:"",round:"",onClick:e=>Q(l.open,l.row.id),icon:"edit"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Editar registro")])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),(null===(s=null===(r=e.$store.state.user)||void 0===r?void 0:r.permissions)||void 0===s?void 0:s.includes("department:delete"))&&((0,t.SU)(_)||(0,t.SU)(N))?((0,a.wg)(),(0,a.j4)(o,{key:1,color:"negative",flat:"",round:"",onClick:e=>(0,t.SU)(d.w)(l.update,`${y}/${l.row.id}`),icon:"delete"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Eliminar registro")])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),(0,t.SU)(_)||(0,t.SU)(N)?((0,a.wg)(),(0,a.j4)(k,{key:2,modelValue:l.row.state,"onUpdate:modelValue":e=>l.row.state=e,color:"primary","false-value":"INACTIVE","true-value":"ACTIVE",onClick:e=>(0,t.SU)(d.$)(l.update,l.row,`${y}/${l.row.id}`)},null,8,["modelValue","onUpdate:modelValue","onClick"])):(0,a.kq)("",!0)]})),_:2},1024),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.name),1)])),_:2},1024),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.description),1)])),_:2},1024),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(D(l.row.group)),1)])),_:2},1024),(0,a.Wm)(q,{class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{square:"",dense:"",color:W[l.row.type].color,"text-color":W[l.row.type].textColor,label:W[l.row.type].label},null,8,["color","text-color","label"])])),_:2},1024),(0,a.Wm)(q,{class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{square:"",dense:"",color:W[l.row.state].color,"text-color":W[l.row.state].textColor,label:W[l.row.state].label},null,8,["color","text-color","label"])])),_:2},1024)])),_:2},1024)])),_:1})])}}});var E=o(2165),T=o(5363),U=o(151),k=o(9570),y=o(4554),N=o(3747),_=o(5589),V=o(8689),q=o(2448),L=o(4689),h=o(7991),W=o(8186),R=o(3884),Z=o(8886),x=o(7030),D=o(7518),G=o.n(D);const Q=g,$=Q;G()(g,"components",{QBtn:E.Z,QTooltip:T.Z,QCard:U.Z,QToolbar:k.Z,QIcon:y.Z,QToolbarTitle:N.Z,QCardSection:_.Z,QForm:V.Z,QSelect:q.Z,QInput:L.Z,QRadio:h.Z,QTr:W.Z,QTd:R.Z,QToggle:Z.Z,QChip:x.Z})}}]);