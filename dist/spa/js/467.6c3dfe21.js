"use strict";(self["webpackChunksmi_frontend"]=self["webpackChunksmi_frontend"]||[]).push([[467],{925:(e,t,n)=>{n.d(t,{e7:()=>a,KS:()=>o,WU:()=>s,Fv:()=>l});const a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=(e,t)=>{const n=new Date(e,t,0).getDate(),a=new Date(e,t-1,1),o=[];for(let s=6-a.getDay(),l=1;s<n;s+=7,l++)o.push({day:s+1,label:`SÃ¡bado ${s+1}`,week:l,total:0});return o},s=e=>{if(!e)return null;const t=new Date(e);return[t.getUTCDate(),t.getUTCMonth()+1,t.getUTCFullYear()].join("/")},l=e=>e?[e.split("/")[2],e.split("/")[1],e.split("/")[0]].join("-"):null},4467:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var a=n(3673),o=n(2323),s=n(1959),l=n(9582),r=n(2993),i=n(925),u=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function l(e){try{i(a.next(e))}catch(t){s(t)}}function r(e){try{i(a["throw"](e))}catch(t){s(t)}}function i(e){e.done?n(e.value):o(e.value).then(l,r)}i((a=a.apply(e,t||[])).next())}))};const c={key:0,class:"container"},d={class:"treasury-title"},p={key:0,class:"text-warning"},v={class:"subtitle"},y={class:"row treasury-row"},w={class:"btn-block-detail"},h={class:"text-right q-pt-xs q-gutter-xs"},m=(0,a.aZ)({setup(e){const t=(0,s.iH)(),n=(0,s.iH)(),m=(0,s.iH)([]),f=(new Date).getDate(),g=(new Date).getMonth()+1,k=(0,s.iH)(0),b=(0,l.yj)(),{entryId:D}=b.params,$=e=>"CLOSED"===t.value.state||t.value.month!==g?"":e.day>=f-7&&e.day<f?"active":"pending",_=e=>"CLOSED"!==t.value.state&&t.value.month===g&&e.day>=f,C=9,x=()=>u(this,void 0,void 0,(function*(){t.value=yield r.http.get(`entries/${parseInt(D)}`),m.value=(0,i.KS)(t.value.year,t.value.month);const e=yield r.http.get(`entries/details?id_entry=${t.value.id}`),n={1:0,2:0,3:0,4:0,5:0};e.rows.forEach((e=>{n[e.week]+=parseFloat(e.value)})),k.value=0,m.value.forEach((e=>{e.total=n[e.week],k.value+=e.total}))})),q=()=>u(this,void 0,void 0,(function*(){const e=yield r.http.get(`expenses?year=${t.value.year}&month=${t.value.month}&id_company=${C}`);e.count&&(n.value=e.rows[0])}));return(0,a.wF)((()=>u(this,void 0,void 0,(function*(){yield x(),yield q()})))),(e,l)=>{const r=(0,a.up)("q-btn"),u=(0,a.up)("q-icon");return t.value?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("h2",d,[(0,a.Wm)(r,{icon:"arrow_back",round:"",flat:"",onClick:l[0]||(l[0]=t=>e.$router.push(`/treasury/entryexpense/${e.$route.params.entryId}/${n.value.id}`))}),(0,a.Uk)(" Ingresos "+(0,o.zw)((0,s.SU)(i.e7)[t.value.month-1])+" - Diezmos y ofrendas ",1),"CLOSED"===t.value.state?((0,a.wg)(),(0,a.iD)("span",p,"CERRADO")):(0,a.kq)("",!0),(0,a._)("span",v,"Total: "+(0,o.zw)(k.value)+" Bs.",1)]),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.value,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"col-xs-6 col-sm-3 q-pa-sm",key:t.week},[(0,a.Wm)(r,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:n=>e.$router.push(`/treasury/entry/${e.$route.params.entryId}/${t.week}`),class:(0,o.C_)(["full-width btn-block",$(t)]),disable:_(t)},{default:(0,a.w5)((()=>[(0,a._)("strong",null,(0,o.zw)(t.label),1),(0,a._)("span",w,(0,o.zw)(t.total)+" Bs.",1),(0,a.Wm)(u,{name:"calendar_month"})])),_:2},1032,["onClick","class","disable"])])))),128))]),(0,a._)("div",h,[n.value?((0,a.wg)(),(0,a.j4)(r,{key:0,label:"Ver gastos del mes","no-caps":"",icon:"money_off",padding:"10px 20px",class:"btn-close-month",onClick:l[1]||(l[1]=t=>e.$router.push(`/treasury/expense/${n.value.id}`))})):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)}}});var f=n(8240),g=n(4554),k=n(7518),b=n.n(k);const D=m,$=D;b()(m,"components",{QBtn:f.Z,QIcon:g.Z})}}]);