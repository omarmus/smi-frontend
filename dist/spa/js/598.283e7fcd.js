"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[598],{7598:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var o=n(3673),s=n(2323),l=n(1959),a=n(8339),i=n(2993),r=n(925),u=n(9236),d=function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function a(e){try{r(o.next(e))}catch(t){l(t)}}function i(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):s(e.value).then(a,i)}r((o=o.apply(e,t||[])).next())}))};const c={class:"container"},v={class:"treasury-title"},p={class:"q-pb-md"},m=(0,o._)("div",{class:"alert alert-info"}," Seleccione el mes que quiere ver/editar ",-1),y={class:"row treasury-row"},w={class:"q-pb-sm"},h={class:"btn-block-detail"},g=(0,o._)("strong",null,"Ingresos:",-1),k={class:"text-primary"},f={class:"btn-block-detail"},_=(0,o._)("strong",null,"Gastos:",-1),b={class:"text-primary"},x={key:1,class:"alert alert-info"},q=(0,o.aZ)({__name:"Months",setup(e){var t,n,q;const $=(0,u.o)(),C=(0,a.tv)(),z=(0,l.iH)((new Date).getFullYear()),D=(0,l.iH)(),E=null===(q=null===(n=null===(t=$.state.user)||void 0===t?void 0:t.user)||void 0===n?void 0:n.company)||void 0===q?void 0:q.id,S=(0,r.V4)(),U=()=>d(this,void 0,void 0,(function*(){const e=yield i.http.get(`entries?year=${z.value}&id_company=${E}&order=month`),t=yield i.http.get(`expenses?year=${z.value}&id_company=${E}&order=month`);D.value=e.rows.map(((e,n)=>(e.idExpense=t.rows[n].id,e.totalExpense=t.rows[n].total,e)))})),I=()=>{var e;const t=null===(e=D.value)||void 0===e?void 0:e.find((e=>"ACTIVE"===e.state));return C.push(t?`/treasury/entryexpense/${String(t.id)}/${String(t.idExpense)}`:"/treasury")};return(0,o.YP)(z,(()=>d(this,void 0,void 0,(function*(){yield U()})))),(0,o.wF)((()=>d(this,void 0,void 0,(function*(){yield U()})))),(e,t)=>{var n,a;const i=(0,o.up)("q-btn"),u=(0,o.up)("q-select"),d=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("h2",v,[(0,o.Wm)(i,{icon:"arrow_back",round:"",flat:"",onClick:I}),(0,o.Uk)(" Ingresos y gastos - Gesti칩n "+(0,s.zw)(z.value),1)]),(0,o._)("div",p,[(0,o.Wm)(u,{filled:"",modelValue:z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),options:(0,l.SU)(S),label:"Gesti칩n"},null,8,["modelValue","options"])]),0!==(null===(n=D.value)||void 0===n?void 0:n.length)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[m,(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.value,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"col-xs-6 col-sm-3 q-pa-sm",key:t.month},[(0,o.Wm)(i,{flat:"",color:"secondary",padding:"lg","no-caps":"",onClick:n=>e.$router.push(`/treasury/entryexpense/${t.id}/${t.idExpense}`),class:(0,s.C_)(["full-width btn-block",t.state.toLowerCase()]),disable:"PENDING"===t.state},{default:(0,o.w5)((()=>{var n,a,i,u,c,v;return[(0,o._)("strong",w,(0,s.zw)((0,l.SU)(r.e7)[t.month-1]),1),(0,o._)("span",h,[g,(0,o.Uk)(),(0,o._)("span",k,(0,s.zw)(Number(t.total).toFixed(2))+" "+(0,s.zw)(null===(i=null===(a=null===(n=e.$store.state.user)||void 0===n?void 0:n.user)||void 0===a?void 0:a.company)||void 0===i?void 0:i.money),1)]),(0,o._)("span",f,[_,(0,o.Uk)(),(0,o._)("span",b,(0,s.zw)(Number(t.totalExpense).toFixed(2))+" "+(0,s.zw)(null===(v=null===(c=null===(u=e.$store.state.user)||void 0===u?void 0:u.user)||void 0===c?void 0:c.company)||void 0===v?void 0:v.money),1)]),(0,o.Wm)(d,{name:"calendar_month"}),"CLOSED"===t.state?((0,o.wg)(),(0,o.j4)(d,{key:0,name:"check_circle",color:"positive",size:"sm",class:"treasury-check"})):(0,o.kq)("",!0)]})),_:2},1032,["onClick","class","disable"])])))),128))])],64)):(0,o.kq)("",!0),0===(null===(a=D.value)||void 0===a?void 0:a.length)?((0,o.wg)(),(0,o.iD)("div",x," No existe datos para el a침o "+(0,s.zw)(z.value)+", seleccione otra gesti칩n. ",1)):(0,o.kq)("",!0)])}}});var $=n(2165),C=n(2448),z=n(4554),D=n(7518),E=n.n(D);const S=q,U=S;E()(q,"components",{QBtn:$.Z,QSelect:C.Z,QIcon:z.Z})}}]);