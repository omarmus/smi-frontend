"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[599],{599:(n,e,t)=>{t.r(e),t.d(e,{default:()=>m});var o=t(3673),s=t(1959),l=t(8339),a=t(4781),i=t(2993),r=t(9236),c=function(n,e,t,o){function s(n){return n instanceof t?n:new t((function(e){e(n)}))}return new(t||(t=Promise))((function(t,l){function a(n){try{r(o.next(n))}catch(e){l(e)}}function i(n){try{r(o["throw"](n))}catch(e){l(e)}}function r(n){n.done?t(n.value):s(n.value).then(a,i)}r((o=o.apply(n,e||[])).next())}))};const u={class:"container"},d={class:"treasury-title"},v={class:"row q-gutter-sm"},p={key:0,class:"col-xs-6 col-sm-3 card-button"},b={key:1,class:"col-xs-6 col-sm-3 card-button"},y={key:2,class:"col-xs-6 col-sm-3 card-button"},f=(0,o.aZ)({__name:"Treasury",setup(n){var e,t;const f=(0,r.o)(),h=null===(t=null===(e=f.state.user)||void 0===e?void 0:e.user)||void 0===t?void 0:t.company.id,w=(0,l.tv)(),g=(0,s.iH)(),k=(0,s.iH)(),m=()=>{const n=g.value.rows.find((n=>"ACTIVE"===n.state)),e=k.value.rows.find((n=>"ACTIVE"===n.state));return n&&e?w.push(`/treasury/entryexpense/${n.id}/${e.id}`):w.push("/treasury/months")},$=(new Date).getUTCFullYear();return(0,o.wF)((()=>c(this,void 0,void 0,(function*(){const n=a.storage.get("initial");if(n)return w.push("/treasury/flows/initial");k.value=yield i.http.get(`expenses/year/${$}/${h}`),g.value=yield i.http.get(`entries/year/${$}/${h}`)})))),(n,e)=>{var t,s,l,a,i,r,c,f;const h=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("h2",d,[(0,o.Wm)(h,{icon:"arrow_back",round:"",flat:"",onClick:e[0]||(e[0]=e=>n.$router.push("/"))}),(0,o.Uk)(" TesorerÃ­a ")]),(0,o._)("div",v,[(null===(s=null===(t=n.$store.state.user)||void 0===t?void 0:t.permissions)||void 0===s?void 0:s.includes("entry:read"))?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"attach_money",label:"Ingresos y Gastos","no-caps":"",onClick:m,class:"full-width btn-block",disable:0===(null===(l=g.value)||void 0===l?void 0:l.count)},null,8,["disable"])])):(0,o.kq)("",!0),(null===(i=null===(a=n.$store.state.user)||void 0===a?void 0:a.permissions)||void 0===i?void 0:i.includes("balance:read"))?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"account_balance",label:"Flujo de caja","no-caps":"",onClick:e[1]||(e[1]=e=>n.$router.push("/treasury/flows/general")),class:"full-width btn-block",disable:0===(null===(r=g.value)||void 0===r?void 0:r.count)},null,8,["disable"])])):(0,o.kq)("",!0),(null===(f=null===(c=n.$store.state.user)||void 0===c?void 0:c.permissions)||void 0===f?void 0:f.includes("account:read"))?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)(h,{flat:"",color:"secondary",padding:"lg",icon:"account_balance_wallet",label:"Cuentas bancarias","no-caps":"",onClick:e[2]||(e[2]=e=>n.$router.push("/treasury/accounts")),class:"full-width btn-block"})])):(0,o.kq)("",!0)])])}}});var h=t(2165),w=t(7518),g=t.n(w);const k=f,m=k;g()(f,"components",{QBtn:h.Z})}}]);