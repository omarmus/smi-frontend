"use strict";(globalThis["webpackChunksmi_frontend"]=globalThis["webpackChunksmi_frontend"]||[]).push([[793],{3793:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var l=t(3673),o=t(1959),n=t(2323),u=t(4220),s=t(2993),r=t(4781),i=t(8339),c=t(9236),d=function(e,a,t,l){function o(e){return e instanceof t?e:new t((function(a){a(e)}))}return new(t||(t=Promise))((function(t,n){function u(e){try{r(l.next(e))}catch(a){n(a)}}function s(e){try{r(l["throw"](e))}catch(a){n(a)}}function r(e){e.done?t(e.value):o(e.value).then(u,s)}r((l=l.apply(e,a||[])).next())}))};const m={class:"layout-menu"},v={class:"personal q-ma-md"},p={class:"personal-datos"},f={class:"personal-name"},w={class:"personal-company"},_=(0,l.aZ)({__name:"Menu",setup(e){const a=(0,c.o)(),t=(0,i.tv)(),_=(0,o.iH)(),h=(0,o.iH)();function g(){u.auth.logout("store")}return(0,l.YP)(_,(()=>d(this,void 0,void 0,(function*(){if("number"===typeof _.value){const e=yield s.http.get(`auth/token/${_.value}`);return r.storage.set("role",e.role),r.storage.set("menu",e.menu),r.storage.set("permissions",e.permissions),r.storage.set("token",e.token),u.auth.initStore(),t.push("/")}})))),(0,l.bv)((()=>{h.value=a.state.user.roles,_.value=a.state.user.role})),(e,a)=>{const t=(0,l.up)("q-icon"),o=(0,l.up)("q-avatar"),u=(0,l.up)("q-separator"),s=(0,l.up)("q-select"),r=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),c=(0,l.up)("q-list"),d=(0,l.up)("q-scroll-area"),k=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(d,{class:"fit"},{default:(0,l.w5)((()=>{var d,y,W,q,Z,b;return[(0,l._)("div",m,[(0,l._)("h1",null,[(0,l.Wm)(t,{name:"church",class:"warning-light",size:"32px"}),(0,l.Uk)(" Secretaría & Tesorería ")])]),(0,l._)("div",v,[(0,l.Wm)(o,{size:"48px",color:"white"},{default:(0,l.w5)((()=>{var a,t,o;return[(0,l.Uk)((0,n.zw)(null===(o=null===(t=null===(a=e.$store.state.user)||void 0===a?void 0:a.user)||void 0===t?void 0:t.username)||void 0===o?void 0:o.substring(0,2).toUpperCase()),1)]})),_:1}),(0,l._)("div",p,[(0,l._)("div",f,(0,n.zw)(null===(y=null===(d=e.$store.state.user)||void 0===d?void 0:d.user)||void 0===y?void 0:y.fullname),1),(0,l._)("div",w,(0,n.zw)(null===(Z=null===(q=null===(W=e.$store.state.user)||void 0===W?void 0:W.user)||void 0===q?void 0:q.company)||void 0===Z?void 0:Z.name),1)])]),(0,l.Wm)(u),(null===(b=h.value)||void 0===b?void 0:b.length)>1?((0,l.wg)(),(0,l.j4)(s,{key:0,square:"",standout:"",color:"teal",label:"Rol seleccionado",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),options:h.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",dark:""},null,8,["modelValue","options"])):(0,l.kq)("",!0),(0,l.Wm)(u),(0,l.Wm)(c,{padding:"",class:"menu-list"},{default:(0,l.w5)((()=>{var o,n,u;return[-1===["TREASURER"].indexOf(null===(o=e.$store.state.user.role)||void 0===o?void 0:o.slug)?(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{key:0,onClick:a[1]||(a[1]=a=>e.$router.push("/secretary")),active:-1!==e.$route.path.indexOf("/secretary"),clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{avatar:"",class:"layout-menu-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{name:"edit_note",class:"color-texto"})])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Secretaria ")])),_:1})])),_:1},8,["active"])),[[k]]):(0,l.kq)("",!0),-1===["SECRETARY"].indexOf(null===(u=null===(n=e.$store.state.user)||void 0===n?void 0:n.role)||void 0===u?void 0:u.slug)?(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{key:1,onClick:a[2]||(a[2]=a=>e.$router.push("/treasury")),active:-1!==e.$route.path.indexOf("/treasury"),clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{avatar:"",class:"layout-menu-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{name:"monetization_on",class:"color-texto"})])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Tesorería ")])),_:1})])),_:1},8,["active"])),[[k]]):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)(u),(0,l.Wm)(c,{padding:"",class:"menu-list"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{onClick:g,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{avatar:"",class:"layout-menu-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{name:"logout",class:"color-texto"})])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Salir de sistema")])),_:1})])),_:1})),[[k]])])),_:1})]})),_:1})}}});var h=t(7704),g=t(4554),k=t(2165),y=t(5096),W=t(5869),q=t(2448),Z=t(7011),b=t(3414),Q=t(2035),S=t(6489),x=t(7518),U=t.n(x);const $=_,C=$;U()(_,"components",{QScrollArea:h.Z,QIcon:g.Z,QBtn:k.Z,QAvatar:y.Z,QSeparator:W.Z,QSelect:q.Z,QList:Z.Z,QItem:b.Z,QItemSection:Q.Z}),U()(_,"directives",{Ripple:S.Z});const R={__name:"MainLayout",setup(e){const a=(0,o.iH)(!1);function t(){a.value=!a.value}return(e,n)=>{const u=(0,l.up)("q-btn"),s=(0,l.up)("q-space"),r=(0,l.up)("q-toolbar"),i=(0,l.up)("q-header"),c=(0,l.up)("q-drawer"),d=(0,l.up)("router-view"),m=(0,l.up)("q-page-container"),v=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(v,{view:"lHh lpR lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-header-main"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",dense:"",round:"",class:"warning-light",icon:"menu","aria-label":"Menu",onClick:t}),(0,l.Wm)(s)])),_:1})])),_:1}),(0,l.Wm)(c,{"show-if-above":"",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),side:"left",bordered:"",width:270,class:"sidebar"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(C))])),_:1},8,["modelValue"]),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1})])),_:1})}}};var T=t(9214),j=t(3812),z=t(9570),V=t(2025),H=t(2901),A=t(2652),E=t(1762);const I=R,O=I;U()(R,"components",{QLayout:T.Z,QHeader:j.Z,QToolbar:z.Z,QBtn:k.Z,QIcon:g.Z,QSpace:V.Z,QDrawer:H.Z,QPageContainer:A.Z,QFooter:E.Z})}}]);